<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="向着目标奔跑！！！">
<meta property="og:type" content="website">
<meta property="og:title" content="Lucky Girl">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Lucky Girl">
<meta property="og:description" content="向着目标奔跑！！！">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="李泼泼">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Lucky Girl</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?41fc030db57d5570dd22f78997dc4a7e";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>





  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

	<script src="/live2d-widget/autoload.js"></script>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Lucky Girl</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Yur's Garden</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404.html" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/07/25/js/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="李泼泼">
      <meta itemprop="description" content="向着目标奔跑！！！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lucky Girl">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/07/25/js/" class="post-title-link" itemprop="url">js</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-07-25 17:15:08 / 修改时间：21:34:24" itemprop="dateCreated datePublished" datetime="2023-07-25T17:15:08+08:00">2023-07-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js%E7%9F%A5%E8%AF%86/" itemprop="url" rel="index"><span itemprop="name">js知识</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="空值合并操作符-与-逻辑或操作符-的区别："><a href="#空值合并操作符-与-逻辑或操作符-的区别：" class="headerlink" title="空值合并操作符 ?? 与 逻辑或操作符 || 的区别："></a>空值合并操作符 ?? 与 逻辑或操作符 || 的区别：</h3><p>前者只有当左侧操作数为 null 或者 undefined 时， 会返回右侧操作数，否则返回左侧操作数；<br>后者是当左侧操作数为假值（比如: 0, ‘’, null, undefined）时，返回右侧操作数；</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/07/25/filter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="李泼泼">
      <meta itemprop="description" content="向着目标奔跑！！！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lucky Girl">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/07/25/filter/" class="post-title-link" itemprop="url">css</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-07-25 09:25:00 / 修改时间：21:26:03" itemprop="dateCreated datePublished" datetime="2023-07-25T09:25:00+08:00">2023-07-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/css%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index"><span itemprop="name">css基础</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="一、filter属性值"><a href="#一、filter属性值" class="headerlink" title="一、filter属性值"></a>一、filter属性值</h3><h4 id="1-1-drop-shadow-给图像设置一个阴影效果"><a href="#1-1-drop-shadow-给图像设置一个阴影效果" class="headerlink" title="1.1 drop-shadow() 给图像设置一个阴影效果"></a>1.1 drop-shadow() 给图像设置一个阴影效果</h4><ul>
<li>应用：提示框三角形<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">.box&#123;</span><br><span class="line">    width: 100px;</span><br><span class="line">    height: 30px;</span><br><span class="line">    border-radius: 4px;</span><br><span class="line">    box-shadow: 1px 1px 2px 2px #ccc;</span><br><span class="line">    background-color: #fff;</span><br><span class="line">    position: relative;</span><br><span class="line">    text-align: center;</span><br><span class="line">    line-height: 30px;</span><br><span class="line">    color: #666;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">&#125;</span><br><span class="line">.box::before &#123;</span><br><span class="line">    content: &#x27;&#x27;;</span><br><span class="line">    display: block;</span><br><span class="line">    position: absolute;</span><br><span class="line">    right: 6px;</span><br><span class="line">    top: -22px;</span><br><span class="line">    width: 1px;</span><br><span class="line">    height: 1px;</span><br><span class="line">    border: 12px solid transparent;</span><br><span class="line">    border-bottom-color: #fff;</span><br><span class="line">    filter: drop-shadow(-1px -4px 2px #ccc);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><img src="../images/filter.jpg" alt="例子图"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/16/flex/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="李泼泼">
      <meta itemprop="description" content="向着目标奔跑！！！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lucky Girl">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/16/flex/" class="post-title-link" itemprop="url">css</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-04-16 17:15:08" itemprop="dateCreated datePublished" datetime="2022-04-16T17:15:08+08:00">2022-04-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-13 22:34:37" itemprop="dateModified" datetime="2022-05-13T22:34:37+08:00">2022-05-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/css%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index"><span itemprop="name">css基础</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="一、display-flex布局"><a href="#一、display-flex布局" class="headerlink" title="一、display:flex布局"></a>一、display:flex布局</h3><p>主轴：项目排列方向，交叉轴：与主轴垂直轴</p>
<h4 id="1、容器属性6属性-display-flex-样式的元素就是我们的容器，这个容器里面包裹的元素就是我们的项目"><a href="#1、容器属性6属性-display-flex-样式的元素就是我们的容器，这个容器里面包裹的元素就是我们的项目" class="headerlink" title="1、容器属性6属性(display:flex;样式的元素就是我们的容器，这个容器里面包裹的元素就是我们的项目)"></a>1、容器属性6属性(display:flex;样式的元素就是我们的容器，这个容器里面包裹的元素就是我们的项目)</h4><table>
<thead>
<tr>
<th align="center">属性</th>
<th align="center">作用</th>
<th align="center">值</th>
</tr>
</thead>
<tbody><tr>
<td align="center">align-items</td>
<td align="center">项目在与交叉轴的对齐方式</td>
<td align="center">flex-start:轴起点对齐；flex-end：轴终点对齐；center：轴中点对齐；baseline：项目第一行文字基线对齐；stretch：如果项目未设置高度或者值为auto，那么项目将占满整个容器高度（default</td>
</tr>
<tr>
<td align="center">justify-content</td>
<td align="center">项目在主轴方向的对齐方式</td>
<td align="center">center：与主轴中心点对齐；space-between：两端对齐，项目间间隔相等，两端项目与容器无间隔；space-around:每个项目间歌相等，两端项目与容器有间隔，小于项目间间隔；flex-end：右对齐；flex-start:左对齐；（default</td>
</tr>
<tr>
<td align="center">align-content</td>
<td align="center">项目有多根轴线情况下的对齐方式，例如使用了换行</td>
<td align="center">flex-start: 与交叉轴起点对齐；flex-end：与交叉轴终点对齐；center：与交叉轴中心点对齐；stretch：占满（default；space-between：与交叉轴两端对齐，项目间隔相等，与容器无间隔；space-around：与交叉轴两端对齐，项目间隔相等，与容器间隔小于项目间隔</td>
</tr>
<tr>
<td align="center">flex-direction</td>
<td align="center">项目排列方向,主轴方向</td>
<td align="center">row:水平方向（起点左边；default；row-reverse：水平方向（起点右边；column:垂直方向（起点在上边；column-reverse:垂直方向（起点在下边；</td>
</tr>
<tr>
<td align="center">flex-wrap</td>
<td align="center">项目在容器内一行放不下是否换行</td>
<td align="center">nowrap:不换；wrap:换行，第一行在上；wrap-reverse:换行，第一行在下</td>
</tr>
<tr>
<td align="center">flex-flow</td>
<td align="center">flex-direction 与 flex-wrap 的缩写</td>
<td align="center">默认值：row nowrap</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h4 id="2、容器内项目6属性"><a href="#2、容器内项目6属性" class="headerlink" title="2、容器内项目6属性"></a>2、容器内项目6属性</h4><table>
<thead>
<tr>
<th align="center">属性</th>
<th align="center">作用</th>
<th align="center">值</th>
</tr>
</thead>
<tbody><tr>
<td align="center">flex-grow</td>
<td align="center">定义项目放大比例，默认0，也就是容器还有剩余空间也不放大</td>
<td align="center">0（不缩小）int:0、1、2….</td>
</tr>
<tr>
<td align="center">flex-shrink</td>
<td align="center">定义项目缩小比例，默认1，容器空间不足，该项目将缩小</td>
<td align="center">单元格</td>
</tr>
<tr>
<td align="center">flex-basis</td>
<td align="center">定义在分配容器多余空间前，项目占据的主轴空间</td>
<td align="center">默认auto，项目本来大小;100px,项目占据固定空间</td>
</tr>
<tr>
<td align="center">flex</td>
<td align="center">是flex-grow、flex-shrink、flex-basis的简写</td>
<td align="center">默认值0 1 auto</td>
</tr>
<tr>
<td align="center">oder</td>
<td align="center">定义项目排列顺序，值越小越靠前。默认0</td>
<td align="center">int:0、1、2….</td>
</tr>
<tr>
<td align="center">align-self</td>
<td align="center">允许单个项目有和其他项目不一样的对齐方式，可覆盖align-items</td>
<td align="center">默认值：auto，表示继承父元素align-items属性，也就是默认stretch；flex-start、flex-end、center、baseline、stretch同容器属性align-items</td>
</tr>
</tbody></table>
<h4 id="3、一些伪类选择器样式"><a href="#3、一些伪类选择器样式" class="headerlink" title="3、一些伪类选择器样式"></a>3、一些伪类选择器样式</h4><p>1、输入框 placeholder 居中：<br>:: - webkit - input - placeholder {<br>  text-align: center;<br>}</p>
<p>2、滚动条输入框隐藏<br>:: - webkit - scrollbar {<br>  display: none;<br>}</p>
<p>实现容器水平垂直居中快方法：</p>
<p>父容器：display: flex;</p>
<p>容器本身：margin: auto;</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/16/%E7%9B%B4%E6%92%AD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="李泼泼">
      <meta itemprop="description" content="向着目标奔跑！！！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lucky Girl">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/16/%E7%9B%B4%E6%92%AD/" class="post-title-link" itemprop="url">直播相关</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-04-16 17:15:08" itemprop="dateCreated datePublished" datetime="2022-04-16T17:15:08+08:00">2022-04-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-08 22:05:18" itemprop="dateModified" datetime="2022-05-08T22:05:18+08:00">2022-05-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%9B%B4%E6%92%AD/" itemprop="url" rel="index"><span itemprop="name">直播</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1、直播原理"><a href="#1、直播原理" class="headerlink" title="1、直播原理"></a>1、直播原理</h2><p>音视频采集：pc\ios\android端，采集到的是直播流。<br>直播流失败的时候，首先去排查流编码是否有问题<br>将直播流推送到服务器上，视频格式分为：mp4,webm,hls,flv(b站)，兼容性从好到差。<br>播放器分点播和直播。</p>
<ul>
<li>直播协议：<ol>
<li>HLS协议：<br>直播借助h5的video播放，HLS协议会给video 一个 M3U8 文件(存放片段索引)，每个索引对应每一个片段.ts文件，每隔9秒浏览器自动刷新M3U8文件。<br>M3U8文件可能是ts文件也可能是M3U8文件。所以这可能会遇到浏览器兼容问题。<br>解析流程：先找PAT的包，在找PMT的包，然后PMT指出那个是解析音频，那个解析视频<br>总结：好用，但是有延时</li>
<li>RTMP协议<br>实时消息传递协议，基于TCP协议<br>总结：实时，但是使用麻烦</li>
<li>HTTP_FLV协议<br>cdn源与端通过http请求<br>优点：<br>a.可以一定程度上避免防火墙干扰<br>b.可以很好兼容HTTP302跳转<br>c.可以使用HTTPS作为加密通道<br>d.很好的支持移动端<br>总结：结合前两种协议优点，但是格式是<br>不同场景使用的协议：<br>对于客户端采集，使用RTMP协议<br>低延时场景，使用RTMP 或者 HTTP_FLV<br>直播播放都使用HLS协议</li>
</ol>
</li>
</ul>
<h2 id="2、video详解"><a href="#2、video详解" class="headerlink" title="2、video详解"></a>2、video详解</h2><h3 id="2-1-属性："><a href="#2-1-属性：" class="headerlink" title="2.1 属性："></a>2.1 属性：</h3><p>基础用法：</p>
<ul>
<li>controls 属性： 控制栏</li>
<li>controlslist 属性： 对控制栏进行限制，比如不让用户下载该视频、不允许全屏</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;video src=&quot;./xxx.mp4&quot; controls controlslist=&#x27;nodownload nofullscreen noremoteplayback&#x27; poster=&#x27;imgurl&#x27;&gt;&lt;/video&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>贴图：poster（贴图） 属性：通过一张预览封面图了解视频大概内容，没有这个属性，是视频的第一帧</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;video src=&quot;./xxx.mp4&quot; controls poster=&#x27;imgurl&#x27;&gt;&lt;/video&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>自动播放：autoplay 属性</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;video src=&quot;./xxx.mp4&quot; controls autoplay&gt;&lt;/video&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>静音：muted 属性移动端非静音视频是不允许自动播放的</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;video src=&quot;./xxx.mp4&quot; muted controls autoplay&gt;&lt;/video&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>循环播放：loop 属性</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;video src=&quot;./xxx.mp4&quot; muted loop controls autoplay&gt;&lt;/video&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>预加载：preload 属性</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;video src=&quot;./xxx.mp4&quot; muted loop preload controls autoplay&gt;&lt;/video&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>音量设置：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;video src=&quot;./xxx.mp4&quot; id=&#x27;video&#x27; controls volume=&#x27;0.5&#x27;&gt;&lt;/video&gt; 音量设置不生效</span><br><span class="line">需要在js中控制</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    const dom = document.getElementById(&#x27;video&#x27;);</span><br><span class="line">    dom.volume = 0.5;</span><br><span class="line">    dom.currentTime = 1; // 单位： 秒 播放时间控制：</span><br><span class="line">    dom.src=&#x27;&#x27;; //改变视频地址</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>备用地址：<br>第一个视频找不到会播放第二个</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;video controls  poster=&#x27;./poster.png&#x27; &gt;</span><br><span class="line">    &lt;source src=&quot;./test2.mp4&quot; type=&#x27;video/mp4&#x27;&gt;</span><br><span class="line">    &lt;source src=&quot;./test1.mp4&quot; type=&#x27;video/mp4&#x27;&gt;</span><br><span class="line">&lt;/video&gt;</span><br></pre></td></tr></table></figure>
<p>此时获取 src值为空，使用currentSrc拿到当前播放地址。</p>
<h3 id="2-2-事件"><a href="#2-2-事件" class="headerlink" title="2.2 事件"></a>2.2 事件</h3><h4 id="2-2-1-loadstart-开始加载"><a href="#2-2-1-loadstart-开始加载" class="headerlink" title="2.2.1 loadstart 开始加载"></a>2.2.1 loadstart 开始加载</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v.addEventListener(&#x27;loadstart&#x27;,function()&#123;&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="2-2-2-durationchange-时长改变"><a href="#2-2-2-durationchange-时长改变" class="headerlink" title="2.2.2 durationchange 时长改变"></a>2.2.2 durationchange 时长改变</h4><p>video初始化的时候拿不到时长信息，时长是NaN；<br>视频加载完毕的时候，拿到时长信息，会触发duration change事件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">console.log(v.duration); //NaN</span><br><span class="line">v.addEventListener(&#x27;durationchange&#x27;,function(e)&#123;console.log(v.duration);&#125;) // （触发多次）拿到的不一定是总时长，因为加载源视频都是一段段的</span><br></pre></td></tr></table></figure>
<h4 id="2-2-3-loadedmetadata"><a href="#2-2-3-loadedmetadata" class="headerlink" title="2.2.3 loadedmetadata"></a>2.2.3 loadedmetadata</h4><p>源数据加载完成<br>v.addEventListener(‘loadedmetadata’, function() {<br>  console.log(‘loadedmetadata’);<br>});<br>源数据加载完毕会触发 durationchange  和 loadedmetadata 事件，但是要注意顺序，先触发前者。</p>
<h4 id="2-2-4-loadeddata"><a href="#2-2-4-loadeddata" class="headerlink" title="2.2.4 loadeddata"></a>2.2.4 loadeddata</h4><p>没有足够音视频帧去播放</p>
<h4 id="2-2-5-progress"><a href="#2-2-5-progress" class="headerlink" title="2.2.5 progress"></a>2.2.5 progress</h4><p>加载数据</p>
<h4 id="2-2-6-canplay"><a href="#2-2-6-canplay" class="headerlink" title="2.2.6 canplay"></a>2.2.6 canplay</h4><p>通知浏览器可以播放视频<br>在这里可以使用video.play()</p>
<h4 id="2-2-7-canplaythrough"><a href="#2-2-7-canplaythrough" class="headerlink" title="2.2.7 canplaythrough"></a>2.2.7 canplaythrough</h4><p>可以流畅播放</p>
<h4 id="2-2-8-play-播放"><a href="#2-2-8-play-播放" class="headerlink" title="2.2.8 play 播放"></a>2.2.8 play 播放</h4><p>视频播放就会触发</p>
<h4 id="2-2-9-pause-暂停"><a href="#2-2-9-pause-暂停" class="headerlink" title="2.2.9 pause 暂停"></a>2.2.9 pause 暂停</h4><h4 id="2-2-10-监听控制条时长"><a href="#2-2-10-监听控制条时长" class="headerlink" title="2.2.10 监听控制条时长"></a>2.2.10 监听控制条时长</h4><p>1、seeking<br>2、seeked</p>
<h4 id="2-2-11-waiting"><a href="#2-2-11-waiting" class="headerlink" title="2.2.11 waiting"></a>2.2.11 waiting</h4><h4 id="2-2-12-playing"><a href="#2-2-12-playing" class="headerlink" title="2.2.12 playing"></a>2.2.12 playing</h4><h4 id="2-2-13-timeupdate"><a href="#2-2-13-timeupdate" class="headerlink" title="2.2.13 timeupdate"></a>2.2.13 timeupdate</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 播放时间更新事件</span><br><span class="line">v.addEventListener(&#x27;timeupdate&#x27;, function()&#123;</span><br><span class="line">    </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="2-2-14ended"><a href="#2-2-14ended" class="headerlink" title="2.2.14ended"></a>2.2.14ended</h4><p>1、监听播放结束事件，2、插入一段广告</p>
<h4 id="2-2-15-error"><a href="#2-2-15-error" class="headerlink" title="2.2.15 error"></a>2.2.15 error</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v.addEventListener(&#x27;error&#x27;, function()&#123;</span><br><span class="line">    console.log(e); // 视频加载出错error 对象有code 属性以及对应错误信息</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>浏览器自带 加载失败 重试机制。<br>程序控制播放：<br>需要监听 canplay 或者 canplaythrough 事件 控制播放</p>
<h2 id="3、直播源的制作"><a href="#3、直播源的制作" class="headerlink" title="3、直播源的制作"></a>3、直播源的制作</h2><h3 id="3-1-方法-nginx-ffmpeg"><a href="#3-1-方法-nginx-ffmpeg" class="headerlink" title="3.1 方法 nginx + ffmpeg"></a>3.1 方法 nginx + ffmpeg</h3><h4 id="3-1-1-安装nginx"><a href="#3-1-1-安装nginx" class="headerlink" title="3.1.1 安装nginx"></a>3.1.1 安装nginx</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">brew tap homebrew/nginx</span><br><span class="line">brew install nginx-full --with-rtmp-module(安装这个模块)</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>
<h4 id="3-1-2-查看nginx安装位置"><a href="#3-1-2-查看nginx安装位置" class="headerlink" title="3.1.2 查看nginx安装位置"></a>3.1.2 查看nginx安装位置</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">brew info nginx-full</span><br><span class="line"></span><br><span class="line">/opt/homebrew/opt/nginx-full/bin/nginx  安装位置</span><br><span class="line">/opt/homebrew/var/www  服务器根目录所在位置</span><br><span class="line">/opt/homebrew/etc/nginx/nginx.conf 配置文件所在目录</span><br></pre></td></tr></table></figure>
<h4 id="3-1-3-安装-ffmpeg"><a href="#3-1-3-安装-ffmpeg" class="headerlink" title="3.1.3 安装 ffmpeg"></a>3.1.3 安装 ffmpeg</h4><p><a target="_blank" rel="noopener" href="http://ffmpeg.org/download.html">http://ffmpeg.org/download.html</a></p>
<p>安装方法1:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install ffmpeg 下载出错 404</span><br></pre></td></tr></table></figure>

<p>安装方法2: </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1 拉取源码 git clone https://git.ffmpeg.org/ffmpeg.git ffmpeg</span><br><span class="line">2 进入ffmpeg文件进行编译  ./configure --prefix=/Users/lyur/ffmpeg（安装目录） --enable-gpl --enable-nonfree --enable-libfdk-aac --enable-libx264 --enable-libx265 --enable-filter=delogo --enable-debug --disable-optimizations --enable-libspeex --enable-videotoolbox --enable-shared --enable-pthreads --enable-version3 --enable-hardcoded-tables --cc=clang --host-cflags= --host-ldflags=</span><br><span class="line">3 安装 sudo make install</span><br><span class="line">安装成功检验：</span><br><span class="line">$ ffmepg </span><br><span class="line">输出相应配置信息</span><br></pre></td></tr></table></figure>

<h4 id="3-1-4-配置-nginx-conf"><a href="#3-1-4-配置-nginx-conf" class="headerlink" title="3.1.4 配置 nginx.conf"></a>3.1.4 配置 nginx.conf</h4><p>使用vscode 打开 nginx.conf</p>
<ul>
<li>1、vs code：commond+shift+p 输入 shell commond: Install ‘code’ command in PATH</li>
<li>2、bash： code xx/nginx.conf</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">    server &#123;</span><br><span class="line">        ...</span><br><span class="line">        location /hls &#123;</span><br><span class="line">          types &#123;</span><br><span class="line">            application/vnd.apple.mpegurl m3u8;</span><br><span class="line">            video/mp2t ts;</span><br><span class="line">          &#125;</span><br><span class="line">          root /Users/lyur/www;（存放m3u8文件的上一级）</span><br><span class="line">          add_header Cache-Control no-cache;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"># rtmp 协议配置</span><br><span class="line">rtmp &#123;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen 1935;</span><br><span class="line">        # rtmp直播流配置</span><br><span class="line">        application rtmplive &#123;</span><br><span class="line">            live on;</span><br><span class="line">        &#125;</span><br><span class="line">        # hls 直播流配置</span><br><span class="line">        application hls &#123;</span><br><span class="line">            live on;</span><br><span class="line">            hls on;</span><br><span class="line">            hls_path /Users/lyur/www/hls;（注意nginx在该目录是否有写入权限）</span><br><span class="line">            hls_fragment 5s;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>说明：<br>rtmp 协议名<br>server 说明内部是服务器相关配置<br>listen 该协议监听的端口号<br>application 访问的应用路径<br>live on 开启实时</p>
<p>后续推流访问：<br>rtmp://localhost:1935/rtmplive/xxx<br>保存 nginx配置文件之后需执行 （重要）</p>
<p>nginx -s reload<br>否则会出现访问拒绝问题：</p>
<p>nginx.conf新增<br>pid /opt/homebrew/etc/nginx/logs/nginx.pid;</p>
<p>这是因为nginx.pid 文件启动才生成</p>
<h4 id="3-1-5-推流"><a href="#3-1-5-推流" class="headerlink" title="3.1.5 推流"></a>3.1.5 推流</h4><p>1、rtmp推流：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -re -i xx.mp4(视频绝对路径) -vcodec libx264 -acodec aac -f flv rtmp://localhost:1935/rtmplive/rtmp(rtmp 随便写)</span><br></pre></td></tr></table></figure>

<p>2、hls推流：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -re -i xx.mp4(视频绝对路径) -vcodec libx264 -acodec aac -f flv rtmp://localhost:1935/hls/stream 推流成功</span><br></pre></td></tr></table></figure>
<p>但是使用Safari 查看视频 404 <a target="_blank" rel="noopener" href="http://localhost:8080/hls/stream.m3u8">http://localhost:8080/hls/stream.m3u8</a>    </p>
<p>查找存放m3u8文件夹，发现里面没有ts和m3u8文件，原因 在/usr/local/var/www/hls目录，没有写入文件权限，更换存放路径/Users/lyur/www/hls<br>修改读取文件路径为/Users/lyur/www，nginx访问成功。</p>
<h4 id="3-1-6-安装-VLC-播放器"><a href="#3-1-6-安装-VLC-播放器" class="headerlink" title="3.1.6 安装 VLC 播放器"></a>3.1.6 安装 VLC 播放器</h4><p><a target="_blank" rel="noopener" href="https://www.videolan.org/index.zh.html">https://www.videolan.org/index.zh.html</a></p>
<p>1.6.1 rtmp推流访问视频：<br>安装之后 打开 file –&gt; open network –&gt; 输入推流的地址</p>
<p>1.7 nginx 配置stat 统计<br>使用 brew install nginx-full，自带统计页面存放位置。</p>
<p>nginx.conf 中配置访问stat页面访问路由</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">location /stat &#123;    </span><br><span class="line">    rtmp_stat all;</span><br><span class="line">    rtmp_stat_stylesheet stat.xsl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location /stat.xsl &#123; </span><br><span class="line">    root /opt/homebrew/opt/rtmp-nginx-module/share/rtmp-nginx-module;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>重启nginx可以查看我们推流是否成功。</p>
<p>2 方法二 集成服务（没有现成服务 没有进行验证）<br>1、推流命令</p>
<p>ffmpeg -re -i xx.mp4(视频绝对路径) -c copy -f flv rtmp://localhost:1935/live/movie<br>2、验证地址</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RTMP: rtmp://localhost:1935/live/movie</span><br><span class="line">FLV:  http://127.0.0.1:7001/live/movie.flv</span><br><span class="line">HLS:  http://127.0.0.1:7002/live/movie.m3u8</span><br></pre></td></tr></table></figure>
<p>方法二无法灵活配置流地址和端口，方法一可以，但是方法一需要熟悉nginx的配置</p>
<p>2.1 下载服务<br>2.2 安装服务<br>2.3准备源视频<br>2.4开启服务<br>2.5利用ffmpeg推流</p>
<h2 id="4、h5直播演练"><a href="#4、h5直播演练" class="headerlink" title="4、h5直播演练"></a>4、h5直播演练</h2><h3 id="4-1-播放器"><a href="#4-1-播放器" class="headerlink" title="4.1 播放器"></a>4.1 播放器</h3><h4 id="1、videojs"><a href="#1、videojs" class="headerlink" title="1、videojs"></a>1、videojs</h4><p>优点：很多插件和自定义ui,内部使用hls实现</p>
<p><a target="_blank" rel="noopener" href="https://github.com/videojs/video.js%E3%80%82">https://github.com/videojs/video.js。</a> 使用文档<a target="_blank" rel="noopener" href="https://videojs.com/">https://videojs.com/</a></p>
<p>基础使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 引入videojs的css js</span><br><span class="line">&lt;link href=&quot;https://cdnjs.cloudflare.com/ajax/libs/video.js/7.10.2/video-js.min.css&quot; rel=&quot;stylesheet&quot;/&gt;</span><br><span class="line">&lt;video id=&#x27;my-player&#x27;&gt;</span><br><span class="line">   &lt;source src=&#x27;test.mp4&#x27; type=&#x27;video/mp4&#x27;&gt;</span><br><span class="line">&lt;/video&gt;</span><br><span class="line">&lt;script src=&#x27;https://cdnjs.cloudflare.com/ajax/libs/video.js/7.10.2/video.min.js&#x27;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">var player = videojs(&#x27;my-player&#x27;, opstions);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>使用ffmpeg 推流， videojs进行播放m3u8文件 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">推流：ffmpeg -re -i -vcodec libx264 -acodec aac -f flv rtmp://localhost:1935/hls/stream</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">引入videojs的css js</span><br><span class="line">&lt;link href=&quot;https://cdnjs.cloudflare.com/ajax/libs/video.js/7.10.2/video-js.min.css&quot; rel=&quot;stylesheet&quot;/&gt;</span><br><span class="line">&lt;video id=&#x27;my-player&#x27;&gt;</span><br><span class="line">   &lt;source src=&#x27;http://localhost:8080/hls/stream.m3u8&#x27; type=&#x27;application/vnd.apple.mpegurl&#x27;&gt;</span><br><span class="line">&lt;/video&gt;</span><br><span class="line">&lt;script src=&#x27;https://cdnjs.cloudflare.com/ajax/libs/video.js/7.10.2/video.min.js&#x27;&gt;&lt;/script&gt;</span><br><span class="line">//支持hls协议</span><br><span class="line">  &lt;script src=&quot;https://unpkg.com/videojs-contrib-hls/dist/videojs-contrib-hls.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">var myPlayer = videojs.getPalyer(&#x27;my-player&#x27;, opstions);</span><br><span class="line"> //需要监听视频加载完成进行播放控制 否则不会加载m3u8文件</span><br><span class="line">      videojs(&quot;my-video&quot;).ready(function()&#123;</span><br><span class="line">        var myPlayer = this;</span><br><span class="line">        myPlayer.play();</span><br><span class="line">      &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>m3u8文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#EXTM3U</span><br><span class="line">#EXT-X-VERSION:3</span><br><span class="line">#EXT-X-MEDIA-SEQUENCE:90</span><br><span class="line">#EXT-X-TARGETDURATION:10</span><br><span class="line">#EXTINF:9.426,</span><br><span class="line">stream-90.ts</span><br><span class="line">#EXTINF:8.695,</span><br><span class="line">stream-91.ts</span><br><span class="line">#EXTINF:9.983,</span><br><span class="line">stream-92.ts</span><br><span class="line">#EXT-X-DISCONTINUITY</span><br><span class="line">#EXTINF:9.997,</span><br><span class="line">stream-93.ts</span><br><span class="line">#EXTINF:3.215,</span><br><span class="line">stream-94.ts</span><br><span class="line">#EXT-X-DISCONTINUITY</span><br><span class="line">#EXTINF:9.913,</span><br><span class="line">stream-95.ts</span><br></pre></td></tr></table></figure>
<h4 id="2、hlsjs"><a href="#2、hlsjs" class="headerlink" title="2、hlsjs"></a>2、hlsjs</h4><p>适合使用hls协议的直播 <a target="_blank" rel="noopener" href="https://github.com/video-dev/hls.js">https://github.com/video-dev/hls.js</a><br>hls demo m3u8文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#EXTM3U</span><br><span class="line">#EXT-X-VERSION:3</span><br><span class="line">#EXT-X-PLAYLIST-TYPE:VOD // 代表这是点播，或者是点播是有进度条拖动，而直播是没有的</span><br><span class="line">#EXT-X-TARGETDURATION:11</span><br><span class="line">#EXTINF:10.000,</span><br><span class="line">url_462/193039199_mp4_h264_aac_hd_7.ts</span><br><span class="line">#EXTINF:10.000,</span><br><span class="line">url_463/193039199_mp4_h264_aac_hd_7.ts</span><br><span class="line">#EXTINF:10.000,</span><br><span class="line">url_464/193039199_mp4_h264_aac_hd_7.ts</span><br><span class="line">#EXT-X-ENDLIST</span><br></pre></td></tr></table></figure>
<p>hls点播demo</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;video id=&#x27;video&#x27; controls width=&#x27;400&#x27;&gt;&lt;/video&gt;</span><br><span class="line">&lt;script src=&#x27;https://cdn.jsdelivr.net/npm/hls.js@latest&#x27;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var video = document.getElementById(&#x27;video&#x27;);</span><br><span class="line">    var videoSrc=&#x27;https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8&#x27;;</span><br><span class="line">    if(Hls.isSupported())&#123;</span><br><span class="line">        var hls = new Hls();</span><br><span class="line">        hls.loadSource(videoSrc);</span><br><span class="line">        hls.attachMedia(video);</span><br><span class="line">    &#125;else if(video.canplayType(&#x27;application/vnd.apple.mpegurl&#x27;))&#123;</span><br><span class="line">        video.src = videoSrc;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>自定义UI 样式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;player&quot; id=&quot;player&quot;&gt;</span><br><span class="line">  &lt;video id=&quot;video&quot; pause&gt;&lt;/video&gt;</span><br><span class="line">  &lt;div class=&quot;btn&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;span class=&quot;onlive&quot;&gt;正在直播&lt;/span&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  var video = document.getElementById(&#x27;video&#x27;);</span><br><span class="line">var player = document.getElementById(&#x27;player&#x27;);</span><br><span class="line">var onlive = document.getElementsByClassName(&#x27;onlive&#x27;)[0];</span><br><span class="line">var btn = document.getElementsByClassName(&#x27;btn&#x27;)[0];</span><br><span class="line">var videoSrc = &#x27;http://localhost:8080/hls/stream.m3u8&#x27;; //&#x27;https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8&#x27;//</span><br><span class="line">if (Hls.isSupported()) &#123;</span><br><span class="line">  var hls = new Hls();</span><br><span class="line">  hls.loadSource(videoSrc);</span><br><span class="line">  hls.attachMedia(video);</span><br><span class="line">  video.play()</span><br><span class="line">&#125;</span><br><span class="line">else if (video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) &#123;</span><br><span class="line">  video.src = videoSrc;</span><br><span class="line">&#125;</span><br><span class="line">btn.addEventListener(&#x27;click&#x27;, function()&#123;</span><br><span class="line">  if(video.paused)&#123;</span><br><span class="line">    video.play();</span><br><span class="line">  &#125;else&#123;</span><br><span class="line">    video.pause();</span><br><span class="line">  &#125; // 实际开发还要注意 ended事件</span><br><span class="line">&#125;);</span><br><span class="line">video.addEventListener(&#x27;play&#x27;, function()&#123;</span><br><span class="line">  player.className = &#x27;player&#x27;;</span><br><span class="line">  onlive.className = &#x27;onlive&#x27;;</span><br><span class="line">&#125;);</span><br><span class="line">video.addEventListener(&#x27;pause&#x27;, function()&#123;</span><br><span class="line">  player.className = &#x27;player pause&#x27;;</span><br><span class="line">  onlive.className = &#x27;onlive pause&#x27;;</span><br><span class="line">&#125;);</span><br><span class="line">video.addEventListener(&#x27;click&#x27;, function()&#123;</span><br><span class="line">  if(video.paused)&#123;</span><br><span class="line">    video.play();</span><br><span class="line">  &#125;else&#123;</span><br><span class="line">    video.pause();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>css:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">.player&#123;</span><br><span class="line">  width: 450px;</span><br><span class="line">  height: 230px;</span><br><span class="line">  position: relative;</span><br><span class="line">&#125;</span><br><span class="line">.player video &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line">.player .btn &#123;</span><br><span class="line">  display: none;</span><br><span class="line">  width: 40px;</span><br><span class="line">  height: 40px;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">  background: rgba(0, 0, 0, .5);</span><br><span class="line">  border-radius: 50%;</span><br><span class="line">  margin: -20px auto auto -20px;</span><br><span class="line">  position: absolute;</span><br><span class="line">  left: 50%;</span><br><span class="line">  top: 50%;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line">.player .btn:hover&#123;</span><br><span class="line">  background-color: rgba(0,0,0,.3);</span><br><span class="line">&#125;</span><br><span class="line">.player .btn::before &#123;</span><br><span class="line">  content: &#x27;&#x27;;</span><br><span class="line">  display: block;</span><br><span class="line">  height: 0;</span><br><span class="line">  width: 0;</span><br><span class="line">  margin-left: 14px;</span><br><span class="line">  margin-top: 4px;</span><br><span class="line">  border: 16px solid transparent; </span><br><span class="line">  border-left: 16px solid #ddd;</span><br><span class="line">&#125;</span><br><span class="line">.player .btn::before:hover &#123;</span><br><span class="line">  border-left-color: #fff;</span><br><span class="line">&#125; </span><br><span class="line">.player.pause .btn&#123;</span><br><span class="line">  display: block;</span><br><span class="line">&#125;</span><br><span class="line">.onlive&#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  left: 40px;</span><br><span class="line">  color: #ccc;</span><br><span class="line">  bottom: 20px;</span><br><span class="line">  display: block;</span><br><span class="line">&#125;</span><br><span class="line">.onlive.pause&#123;</span><br><span class="line">  display: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>hlsjs 比 videojs 比较：<br>后者体积大，前者比较灵活，没有videojs那么多功能，<br>UI方面：hls可以自定义，而videojs有基本UI封装，如果需要修改样式，需要自定义插件或者使用UI样式进行覆盖</p>
<h4 id="3、flvjs"><a href="#3、flvjs" class="headerlink" title="3、flvjs"></a>3、flvjs</h4><p>flv推流服务 未成功启动，所以没有进行demo</p>
<h2 id="5、微信小程序演练"><a href="#5、微信小程序演练" class="headerlink" title="5、微信小程序演练"></a>5、微信小程序演练</h2><p>微信小程序实时播放流组件  <live-player />  注意：不支持hls协议的直播源，支持flv、rtmp</p>
<ul>
<li>1、使用 ffmpeg + nginx 实现 rtmp推流: </li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -re -i test.mp4 -vcodec libx264 -acodec aac -f flv rtmp://localhost:1935/rtmplive/rtmpdemo</span><br></pre></td></tr></table></figure>


<ul>
<li>2、微信小程序内使用播放直播流组件：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;live-player src=&quot;rtmp://localhost:1935/rtmplive/rtmpdemo&quot;</span><br><span class="line"> mode=&quot;RTC&quot; autoplay bindstatechange=&quot;statechange&quot; binderror=&quot;error&quot; style=&quot;width: 300px; height: 225px;&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p>需要真机调试，这里需要注意我们直播流地址localhost对应的是我们电脑的127.0.0.1 但是进行真机调试需要是的手机和电脑出在同一个局域网，直播源ip使用的是电脑的ip：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src=&quot;rtmp://10.4.12.237:1935/rtmplive/rtmpdemo&quot;</span><br></pre></td></tr></table></figure>
<p>配置之后发现无法报错：live-player报渲染失败：insertLivePlayer:fail jsapi has no permission<br>修改小程序管理后台权限 <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/wxamp/categoryapi/index?token=683321573&amp;lang=zh_CN">https://mp.weixin.qq.com/wxamp/categoryapi/index?token=683321573&amp;lang=zh_CN</a> （开发管理 -&gt; 接口设置 -&gt; 实时播放音视频流打开）</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/08/http/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="李泼泼">
      <meta itemprop="description" content="向着目标奔跑！！！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lucky Girl">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/08/http/" class="post-title-link" itemprop="url">计网</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-08 20:06:08" itemprop="dateCreated datePublished" datetime="2020-08-08T20:06:08+08:00">2020-08-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-08 22:13:25" itemprop="dateModified" datetime="2022-05-08T22:13:25+08:00">2022-05-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" itemprop="url" rel="index"><span itemprop="name">基础知识</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="计算机网络基础"><a href="#计算机网络基础" class="headerlink" title="计算机网络基础"></a>计算机网络基础</h2><h3 id="一、书籍推荐：《图解HTTPS》《HTTP权威指南》"><a href="#一、书籍推荐：《图解HTTPS》《HTTP权威指南》" class="headerlink" title="一、书籍推荐：《图解HTTPS》《HTTP权威指南》"></a>一、书籍推荐：《图解HTTPS》《HTTP权威指南》</h3><h3 id="二、HTTP缓存"><a href="#二、HTTP缓存" class="headerlink" title="二、HTTP缓存"></a>二、HTTP缓存</h3><p>   HTTP缓存分为强缓存和协商缓存：<br>   先通过Cache-control验证强缓存是否可用，可用就直接读取缓存，否则进入协商缓存阶段，发起http请求，服务器通过<br>   请求头是否有If-Modified-Since 和 If-None-Match 条件请求字段检查资源是否更新：<br>   如果资源更新，那么就返回资源和200状态码；<br>   如果资源未更新，那么告诉浏览器直接使用缓存获取资源。</p>
<h3 id="三、http常用状态码以及使用场景"><a href="#三、http常用状态码以及使用场景" class="headerlink" title="三、http常用状态码以及使用场景"></a>三、http常用状态码以及使用场景</h3><ul>
<li>1xx: 表示当前是协议的中间态，还需要后续请求</li>
<li>2xx:表示请求成功</li>
<li>3xx:表示重定向状态</li>
<li>4XX:表示请求报文出错</li>
<li>5xx: 表示服务器错误</li>
</ul>
<ul>
<li>常用状态码：</li>
</ul>
<ul>
<li>101: 切换请求协议，从http切换到websocket</li>
<li>200: 请求成功</li>
<li>301 永久重定向：会缓存</li>
<li>302 临时重定向：不会缓存</li>
<li>304 协商缓存命中</li>
<li>403 服务器禁止访问</li>
<li>404 资源未找到</li>
<li>400 请求错误</li>
<li>500 服务端错误</li>
</ul>
<p>  遇到302状态码的某些场景：</p>
<ol>
<li><p>302表示临时重定向，这个资源只是暂时不能被访问，但是之后过一段时间还是可以继续访问，一般是访问某个网站的资源需要权限时，会需要用户登录，跳转到登录页面之后还可以继续访问。</p>
</li>
<li><p>301是永久重定向，跳转到一个新网站，但是301代表这个被访问的地质资源被永久移除了，以后都不会访问这个地址，搜索引擎抓取的时候也会使用新的地址替换这个旧地址。可以在响应的location首部去获取到返回的地址。</p>
</li>
</ol>
<h3 id="四、-HTTP常用请求方式"><a href="#四、-HTTP常用请求方式" class="headerlink" title="四、 HTTP常用请求方式"></a>四、 HTTP常用请求方式</h3><p> http/1.1 规定的请求方式：</p>
<ol>
<li>GET: 获取数据，参数在url上</li>
<li>POST: 提交数据，比如登录页面登录用户信息时使用</li>
<li>PUT:修改数据</li>
<li>HEAD: 获取资源的元信息</li>
<li>DELETE: 删除数据</li>
<li>CONNECT: 建立连接通道，用在代理服务器</li>
<li>OPTIONS: 列出可对资源实行的请求方法，常用于跨域</li>
<li>TRACE: 追踪请求-响应的传输路径</li>
</ol>
<h3 id="五、-网络分层"><a href="#五、-网络分层" class="headerlink" title="五、 网络分层"></a>五、 网络分层</h3><ul>
<li>OSI体系结构： 7.应用层 6.表示层 5.会话层 4.传输层 3.网络层 2.链路层 1.物理层</li>
<li>TCP/IP结构： 4.应用层(FTP) 3. 运输层(TCP,UDP) 2.网络层（IP、ICMP、IGMP) 1.网络接口层</li>
<li>五层体系结构： 5.应用层 4.运输层 3.网络层 2.链路层 1.物理层</li>
</ul>
<h3 id="六、-HTTPS"><a href="#六、-HTTPS" class="headerlink" title="六、 HTTPS"></a>六、 HTTPS</h3><p>HTTPS是在HTTP和TCP之间建立的一个安全层，HTTP与TCP通信时必须经过一个安全层，对数据进行加密，然后将加密后的数据包传给TCP，相应的TCP必须将数据包解密，才能传给上面的HTTP。浏览器传输一个client_random和加密方法列表，服务器收到后给浏览器传一个server_random、加密方法列表和数字证书（包含公钥），然后浏览器对数字证书进行验证，如果验证通过，则生成一个pre_random,然后用公钥加密传给服务器，服务器用client_random、server_random和pre_random,使用公钥加密生成secret，之后的传输就使用secret作为密钥来进行数据的加解密。</p>
<h3 id="七、三次握手"><a href="#七、三次握手" class="headerlink" title="七、三次握手"></a>七、三次握手</h3><p>   <img src="../images/ws.png" alt="三次握手图解"><br>     第一次握手：一开始都处于CLOSED状态，客户端主动发起连接请求，发送syn包（seq=j）到服务器，并进入SYN_SENT状态（syn:同步序列编号）<br>     第二次握手：服务器收到syn包，确认客户端的ACK(ack=j+1),同时发送一个SYN包（seq=k），即SYN+ACK包，而后进入SYN_RECV状态；<br>     第三次握手：客户端收到服务器的ACK+SYN包，向服务器发送确认包ACK（ack=k+1）,进入ESTABLISHED（TCP连接成功）状态，完成三次握手，客户端与服务端开始传输数据。<br>     <code>SYN需要对端确认，所以ACK的序列化要加一，凡是需要对端确认的，要消耗TCP报文的序列化</code></p>
<h3 id="八、四次挥手"><a href="#八、四次挥手" class="headerlink" title="八、四次挥手"></a>八、四次挥手</h3><p>  <img src="../images/hs.png" alt="四次挥手图解"><br>   一开始都处于ESTABLISHED状态，客户端发送报文FIN=1和seq=x,进入FIN_WAIT_1状态；服务端收到报文后，发送确认报文ack=x+1，seq=y,ACK=1，然后进入CLOSE_WAIT状态；<br>   客户端收到服务端的确认报文之后进入FIN_WAIT_2状态；而后服务端再次发送seq=z，FIN=1，ack=x+1,进入LAST-ACK状态,等待客户端确认；客户端收到后发出确认ACK=1，ack=z+1,seq=x+1,进入TIME_WAIT状态，经过2MSL(最长报文段寿命)事件后，才进入CLOSED状态，<br>   然后发送ACK给服务端，服务端收到后进入CLOSED状态。</p>
<p>   为什么要等待2MSL？<br>    2MSL是两倍的MSL(Maximum Segment Lifetime),MSL是一个片段在网络中最大的存活时间，2MSL就是一个发送和一个回复所要的最大时间，如果直到2MSL客户端都没收到FIN，就推断ACK已被成功接收，结束TCP连接。</p>
<p>   在交互过程中如果数据传送完了，如果不想断开两端连接可以在HTTP的响应体的Connection字段指定为keep-alive</p>
<h3 id="九、TCP滑动窗口（分为发送窗口和接收窗口）"><a href="#九、TCP滑动窗口（分为发送窗口和接收窗口）" class="headerlink" title="九、TCP滑动窗口（分为发送窗口和接收窗口）"></a>九、TCP滑动窗口（分为发送窗口和接收窗口）</h3><pre><code>在TCP连接中，对于发送端和接收端，TCP需要把发送的数据放到发送缓存区，将接收的数据放到接收缓存区。经常会发生发送端发送过多而接收端无法接收的情况，所以需要流量控制，也就是根据接收缓存区的大小来控制发送端的发送。如果接收缓存区已经满了，此时发送端就不需要继续发送数据了。
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/08/problem/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="李泼泼">
      <meta itemprop="description" content="向着目标奔跑！！！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lucky Girl">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/08/problem/" class="post-title-link" itemprop="url">项目遇到的问题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-08 20:06:08" itemprop="dateCreated datePublished" datetime="2020-08-08T20:06:08+08:00">2020-08-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-07-25 21:32:33" itemprop="dateModified" datetime="2023-07-25T21:32:33+08:00">2023-07-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%81%87%E5%88%B0%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/" itemprop="url" rel="index"><span itemprop="name">遇到问题汇总</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="一、问题"><a href="#一、问题" class="headerlink" title="一、问题"></a>一、问题</h3><h4 id="1-在-build-项目时-报错-plugins-0-may-only-be-a-two-tuple-or-three-tuple"><a href="#1-在-build-项目时-报错-plugins-0-may-only-be-a-two-tuple-or-three-tuple" class="headerlink" title="1.在 build 项目时,报错 .plugins[0] may only be a two-tuple or three-tuple"></a>1.在 build 项目时,报错 .plugins[0] may only be a two-tuple or three-tuple</h4><p>检查配置文件babel.config.js发现问题</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">	plugins: [</span><br><span class="line">  [</span><br><span class="line">    &#x27;component&#x27;,</span><br><span class="line">    &#123;</span><br><span class="line">      libraryName: &#x27;element-ui&#x27;,</span><br><span class="line">      styleLibraryName: &#x27;theme-chalk&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">	 ...prodPlugins,</span><br><span class="line">	&#x27;@babel/plugin-syntax-dynamic-import&#x27;</span><br><span class="line">  ]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<pre><code>应该这样配置
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">   plugins: [</span><br><span class="line">  [</span><br><span class="line">    &#x27;component&#x27;,</span><br><span class="line">    &#123;</span><br><span class="line">      libraryName: &#x27;element-ui&#x27;,</span><br><span class="line">      styleLibraryName: &#x27;theme-chalk&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">	 ...prodPlugins,</span><br><span class="line">	&#x27;@babel/plugin-syntax-dynamic-import&#x27;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h4 id="2-注意："><a href="#2-注意：" class="headerlink" title="2. 注意："></a>2. 注意：</h4><p>在使用cdn加载elementui时，public/index.html一定要先加载vue.js再加载element-ui.js要不然组件就会无效！！</p>
<h4 id="3-error"><a href="#3-error" class="headerlink" title="3. error"></a>3. error</h4><pre><code>![error](../images/mainerr.png)
遇到图上错误是因为next-util的package.json中的入口文件index.js丢失，我们可以点击&lt;a href=&quot;https://github.com/theme-next/next-util/&quot;&gt;这里&lt;/a&gt;
找到对应的index.js下载到我们node_modules/next-util文件夹中即可。
</code></pre>
<h4 id="4-使用elementUI时间选择范围组件daterange，设置只能选择一个月时间范围设置如下："><a href="#4-使用elementUI时间选择范围组件daterange，设置只能选择一个月时间范围设置如下：" class="headerlink" title="4.使用elementUI时间选择范围组件daterange，设置只能选择一个月时间范围设置如下："></a>4.使用elementUI时间选择范围组件daterange，设置只能选择一个月时间范围设置如下：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-date-picker</span><br><span class="line">  v-model=&quot;value1&quot;</span><br><span class="line">  type=&quot;daterange&quot;</span><br><span class="line">  range-separator=&quot;至&quot;</span><br><span class="line">  start-placeholder=&quot;开始日期&quot;</span><br><span class="line">  end-placeholder=&quot;结束日期&quot;</span><br><span class="line">  :picker-options=&quot;pickerOptions&quot;&gt;</span><br><span class="line">&lt;/el-date-picker&gt;</span><br><span class="line">SCRIPT -------------</span><br><span class="line">data()&#123;</span><br><span class="line">  return &#123;</span><br><span class="line">  pickerOptions:&#123;</span><br><span class="line">   onPick(&#123;minDate,maxDate&#125;)&#123;</span><br><span class="line">      if(!maxDate)&#123;</span><br><span class="line">        this.disableDate = function(time)&#123;</span><br><span class="line">            return time.getTime() &gt; minDate.getTime + 31*24*60*60*1000; </span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h4 id="5、因为事件没有声明，整个页面不能随之渲染，影响状态改变后的渲染"><a href="#5、因为事件没有声明，整个页面不能随之渲染，影响状态改变后的渲染" class="headerlink" title="5、因为事件没有声明，整个页面不能随之渲染，影响状态改变后的渲染"></a>5、因为事件没有声明，整个页面不能随之渲染，影响状态改变后的渲染</h4><p><img src="../images/vue-pro1.png" alt="error"></p>
<h4 id="6、vue组件data是函数"><a href="#6、vue组件data是函数" class="headerlink" title="6、vue组件data是函数"></a>6、vue组件data是函数</h4><p>为什么是函数而不是对象呢？因为使用对象的话，每个实例（组件）上使用的data数据是相互影响的，这当然就不是我们想要的了。对象是对于内存地址的引用，直接定义个对象的话组件之间都会使用这个对象，这样会造成组件之间数据相互影响。<br>原因：在某组件中的data()函数写错，错误的写法是data(){},正确的写法是data(){return {}}<br><img src="../images/vue-pro2.png" alt="error"></p>
<h4 id="7、注册全局组件，在App-vue-使用该全局组件，全局组件位置出现灰字处代码"><a href="#7、注册全局组件，在App-vue-使用该全局组件，全局组件位置出现灰字处代码" class="headerlink" title="7、注册全局组件，在App.vue 使用该全局组件，全局组件位置出现灰字处代码"></a>7、注册全局组件，在App.vue 使用该全局组件，全局组件位置出现灰字处代码</h4><p><img src="../images/vue-pro3.png" alt="error"></p>
<p>vue编译版本不对,需要引入完整版<br><img src="../images/vue-pro4.png" alt="error"></p>
<p>原因：vue运行版本不支持template模版渲染，项目使用的是vue运行版：vue-2.6.10.runtime.min.js，</p>
<p>针对不同解决：</p>
<p>1.全局vue：  <a href="mailto:&#x76;&#x75;&#x65;&#x40;&#x32;&#x2e;&#x36;&#46;&#x31;&#x30;&#x2e;&#109;&#105;&#x6e;&#46;&#x6a;&#x73;">&#x76;&#x75;&#x65;&#x40;&#x32;&#x2e;&#x36;&#46;&#x31;&#x30;&#x2e;&#109;&#105;&#x6e;&#46;&#x6a;&#x73;</a> 能正确渲染该全局组件。</p>
<p>2.局部引入import Vue from ‘vue’（默认导入的是vue.runtime.common.js）<br><img src="../images/vue-pro5.png" alt="error"></p>
<p>a.修改webpack:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">  alias: &#123;</span><br><span class="line">    vue: &#x27;vue/dist/vue.esm.js&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>b.修改引入方式 ：<br>import Vue from ‘vue/dist/vue.esm.js’;<br>vue运行版 和 vue完整版 区别：<br>（vue运行版 相对于 完整版没有的）<br>不支持从html获取视图<br>不支持template，需通过webpack的vue-loader将组件预编译template模版成render函数<br>没有compiler编译器</p>
<h4 id="8、运行npm-脚本-‘webpack-dev-server-–mode-development-–config-build-webpack-config-js’-报错："><a href="#8、运行npm-脚本-‘webpack-dev-server-–mode-development-–config-build-webpack-config-js’-报错：" class="headerlink" title="8、运行npm 脚本 ‘webpack-dev-server –mode=development –config ./build/webpack.config.js’ 报错："></a>8、运行npm 脚本 ‘webpack-dev-server –mode=development –config ./build/webpack.config.js’ 报错：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[webpack-cli] /Users/lyur/Desktop/project/personal-pro/ts_in_action/node_modules/webpack-dev-server/lib/getPort.js:13</span><br><span class="line">const maxPort = 65_535;</span><br><span class="line">                ^^</span><br><span class="line"></span><br><span class="line">SyntaxError: Invalid or unexpected token</span><br><span class="line">    at Module._compile (internal/modules/cjs/loader.js:723:23)</span><br><span class="line">    at Object.Module._extensions..js (internal/modules/cjs/loader.js:789:10)</span><br><span class="line">    at Module.load (internal/modules/cjs/loader.js:653:32)</span><br><span class="line">    at tryModuleLoad (internal/modules/cjs/loader.js:593:12)</span><br><span class="line">    at Function.Module._load (internal/modules/cjs/loader.js:585:3)</span><br><span class="line">    at Module.require (internal/modules/cjs/loader.js:692:17)</span><br><span class="line">    at require (internal/modules/cjs/helpers.js:25:18)</span><br><span class="line">    at Function.getFreePort (/Users/lyur/Desktop/project/personal-pro/ts_in_action/node_modules/webpack-dev-server/lib/Server.js:397:21)</span><br><span class="line">    at Server.start (/Users/lyur/Desktop/project/personal-pro/ts_in_action/node_modules/webpack-dev-server/lib/Server.js:3203:40)</span><br><span class="line">    at process._tickCallback (internal/process/next_tick.js:68:7)</span><br><span class="line">npm ERR! code ELIFECYCLE</span><br><span class="line">npm ERR! errno 2</span><br><span class="line">npm ERR! ts_in_action@1.0.0 start: `webpack-dev-server --mode=development --config ./build/webpack.config.js`</span><br><span class="line">npm ERR! Exit status 2</span><br><span class="line">npm ERR!</span><br><span class="line">npm ERR! Failed at the ts_in_action@1.0.0 start script.</span><br><span class="line">npm ERR! This is probably not a problem with npm. There is likely additional logging output above.</span><br></pre></td></tr></table></figure>
<p>原因： webpack webpack-dev-server 依赖包版本不对应，安装对应版本即可。</p>
<h4 id="9、部署博客遇到问题"><a href="#9、部署博客遇到问题" class="headerlink" title="9、部署博客遇到问题"></a>9、部署博客遇到问题</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kex_exchange_identification: Connection closed by remote host</span><br><span class="line">fatal: 无法读取远程仓库。</span><br></pre></td></tr></table></figure>
<p>需要关掉我们的电脑vpn, 在进行部署。</p>
<h4 id="10、script脚本：”eslint-src-–ext-js-ts”报错："><a href="#10、script脚本：”eslint-src-–ext-js-ts”报错：" class="headerlink" title="10、script脚本：”eslint src –ext .js,.ts”报错："></a>10、script脚本：”eslint src –ext .js,.ts”报错：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Error: Cannot find module &#x27;eslint-plugin- @typescript-eslint&#x27;</span><br><span class="line">Referenced from: /Users/lyur/Desktop/project/personal-pro/ts-babel/.eslintrc.json</span><br></pre></td></tr></table></figure>
<p>.eslintrc.json</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;plugins&quot;: [&quot;@typescript-eslint&quot;],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="11、vant升级，vue-router-params传参数全挂"><a href="#11、vant升级，vue-router-params传参数全挂" class="headerlink" title="11、vant升级，vue-router params传参数全挂"></a>11、vant升级，vue-router params传参数全挂</h4><p><img src="../images/vant.jpg" alt="vue-router升级说明"><br>vant 升级到4 （依赖的<a href="mailto:&#x76;&#117;&#x65;&#x2d;&#x72;&#x6f;&#x75;&#x74;&#x65;&#x72;&#64;&#x34;&#46;&#x32;&#x2e;&#x32;">&#x76;&#117;&#x65;&#x2d;&#x72;&#x6f;&#x75;&#x74;&#x65;&#x72;&#64;&#x34;&#46;&#x32;&#x2e;&#x32;</a>）params路由传参数出错， 因为npm安装包会根据package.json中的依赖修饰符（~, ^）自动升级依赖版本。 package.json 中 vue-router^4.0.12（^允许安装4.x.x符合依赖的版本，也就是会安装4.2.2，这个版本已经删除params路由传参数）<br>解决方案： 将package.json中 vue-router版本’4.0.12’ 指定安装的就是4.0.12，params路由传参不会报错</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/08/Vue%20Router/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="李泼泼">
      <meta itemprop="description" content="向着目标奔跑！！！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lucky Girl">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/08/Vue%20Router/" class="post-title-link" itemprop="url">Vue Router</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-08 17:17:47" itemprop="dateCreated datePublished" datetime="2020-08-08T17:17:47+08:00">2020-08-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-09 22:08:36" itemprop="dateModified" datetime="2022-05-09T22:08:36+08:00">2022-05-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/vue/" itemprop="url" rel="index"><span itemprop="name">vue</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Vue-Router"><a href="#Vue-Router" class="headerlink" title="Vue Router"></a>Vue Router</h1><h2 id="1-简单列子"><a href="#1-简单列子" class="headerlink" title="1 简单列子"></a>1 简单列子</h2><p>mian.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;;</span><br><span class="line">import VueRouter from &#x27;vue-router&#x27;;</span><br><span class="line">Vue.use(VueRouter);</span><br><span class="line">const foo = &#123; template: &#x27;&lt;div&gt;foo&lt;/div&gt;&#x27; &#125;;</span><br><span class="line">const bar = &#123; template: &#x27;&lt;div&gt;bar&lt;/div&gt;&#x27; &#125;;</span><br><span class="line">const routes = [</span><br><span class="line">    &#123; path: &#x27;/foo&#x27;, component: foo &#125;,</span><br><span class="line">    &#123; path: &#x27;/bar&#x27;, component: bar &#125;</span><br><span class="line">];</span><br><span class="line">const router = new VueRouter(&#123; routes &#125;);</span><br><span class="line">new Vue(&#123;</span><br><span class="line">    el: &#x27;#app&#x27;,</span><br><span class="line">    router,</span><br><span class="line">    render: h =&gt; h(App)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>App.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&#x27;/foo&#x27;&gt;foo&lt;/router-link&gt;</span><br><span class="line">&lt;router-link to=&#x27;/bar&#x27;&gt;bar&lt;/router-link&gt;</span><br><span class="line">// 路由出口 匹配的组件将在这里渲染</span><br><span class="line">&lt;router-view&gt;&lt;/router-view&gt;</span><br></pre></td></tr></table></figure>

<p>路由注册之后，可以在通过 this.$router 获取当前路由器，通过 this.$route 获取当前路由</p>
<h2 id="2-动态路由配置"><a href="#2-动态路由配置" class="headerlink" title="2 动态路由配置"></a>2 动态路由配置</h2><p>当我们需要根据不同id去判断组件渲染的时候，可以在路由路径中使用动态参数实现：<br>route.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const routes = [</span><br><span class="line"> &#123; path: &#x27;/articleDetail/:articleId&#x27;, component: contentComp &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<p>contentComp.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">组件内可以根据 this.$route.params 拿到articleId</span><br><span class="line">&lt;div&gt;&#123;&#123;$route.params.articleId&#125;&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>注意⚠️： 动态路由切换的时候，所用的组件实例会被复用，这意味着组件的生命周期钩子函数不会再被调用。<br>如果想要监听路由变化，可以使用watch监听路由$route 或者 使用beforeRouteUpdate(..)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1、watch: &#123;</span><br><span class="line">    $route(to,  from)&#123;</span><br><span class="line">    ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">2、</span><br><span class="line">beforeRouteUpdate(to, from, next)&#123;</span><br><span class="line">    ...</span><br><span class="line">    next(); // 一定要调用，不然不会往下走</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果设置了统配路由，那么就放在路由最后面，{ path: “*” },使用了统配路由，可以通过 this.$route.params.pathMatch 获取匹配路由匹配的部分。<br>路由匹配优先级：按照路由定义顺序进行优先匹配。<br>嵌套路由：<br>路由选项 children 参数 可以设置主路由下的嵌套路由</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">例如：/user/bar/baz</span><br><span class="line">var routes = [</span><br><span class="line">    &#123; path: &#x27;/bar&#x27;, component: baz, children: [</span><br><span class="line">        &#123; path: &#x27;baz&#x27;, component: baz &#125;</span><br><span class="line">    ] &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>实现嵌套路由 vue文件也需要 匹配渲染入口嵌套<br><router-view><router-view></p>
<h2 id="3-编程式导航"><a href="#3-编程式导航" class="headerlink" title="3 编程式导航"></a>3 编程式导航</h2><h3 id="3-1-router-push-location-onComplete-onAbort"><a href="#3-1-router-push-location-onComplete-onAbort" class="headerlink" title="3.1 router.push(location, onComplete?, onAbort?)"></a>3.1 router.push(location, onComplete?, onAbort?)</h3><p>编程式 router.push(…)<br>相当于 声明式<router-link to='...'></router-link></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">router.push(&#x27;foo&#x27;); 这会往history栈添加一个新的记录</span><br><span class="line">router.push(&#123;path: &#x27;foo&#x27;, query: &#123; id: 21323213 &#125;&#125;);</span><br><span class="line">命名路由：</span><br><span class="line">在routes配置中给某个路由设置名称</span><br><span class="line">router.push(&#123;name: &#x27;bar&#x27;, params: &#123; index: 1 &#125;&#125;); // 如果提供path， 那么params 会被忽略 /bar/1</span><br><span class="line">router.push(&#123;path: &#x27;bar&#x27;, params: &#123; index: 1 &#125;&#125;); //bar</span><br><span class="line">const index = 1;</span><br><span class="line">router.push(&#123;path: `/bar/$&#123;index&#125;`&#125;); // bar/1</span><br><span class="line"></span><br><span class="line">### 3.2 router.replace(location, onComplete?, onAbort?)</span><br><span class="line">router.replace(...) 相当于 &lt;router-link to=&#x27;&#x27; replace&gt;</span><br><span class="line">不会向history栈新增路由，会替换当前history记录</span><br><span class="line">### 3.3 router.go(n)</span><br><span class="line">在history栈先前或者后退多少步，类似 window.history.go(n)</span><br><span class="line"></span><br><span class="line">router.go(1) ==&gt; history.forward()</span><br><span class="line">router.go(-1) ==&gt; history.back() </span><br><span class="line"></span><br><span class="line"> 命名视图，可以设置多个入口</span><br><span class="line"> &#123; path: &#x27;/&#x27;, components: &#123; default: foo, aside: bar &#125; &#125;</span><br><span class="line">&lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;router-view name=&#x27;aside&#x27;&gt;&lt;/router-view&gt;</span><br><span class="line"></span><br><span class="line">路由重定向</span><br><span class="line">&#123; path: &#x27;/&#x27;, redirect: &#x27;/foo&#x27; || &#123; name: &#x27;foo&#x27; &#125; || to =&gt; &#123; return 字符串路径/路径对象  &#125; &#125;</span><br><span class="line"> 对于包含命名视图的路由，必须为每一个命名视图添加 ‘props’ 选项</span><br><span class="line"> &#123; path: &#x27;/&#x27;, components: &#123; default: foo, aside: bar &#125;，props: &#123; default: true, aside: true &#125; &#125;</span><br></pre></td></tr></table></figure>

<p>那么命名路由参数就会是我们的 组件属性 ···</p>
<h3 id="3-4-HTML5history模式"><a href="#3-4-HTML5history模式" class="headerlink" title="3.4 HTML5history模式"></a>3.4 HTML5history模式</h3><p>vue-router  默认使用 hash模式<br>可以创建vueRouter实例的时候声明模式 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var router = new VueRouter(&#123;</span><br><span class="line">    mode: &#x27;history&#x27;,</span><br><span class="line">    routes</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="4-导航守卫"><a href="#4-导航守卫" class="headerlink" title="4 导航守卫"></a>4 导航守卫</h2><h3 id="4-1-全局前置守卫"><a href="#4-1-全局前置守卫" class="headerlink" title="4.1 全局前置守卫"></a>4.1 全局前置守卫</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">router.beforeEach((to, from, next) =&gt; &#123; // 确保next()执行一次 &#125;)</span><br></pre></td></tr></table></figure>
<p>to: 将要去的route对象<br>from: 当前正要离开的route对象</p>
<h3 id="4-2-全局后置钩子"><a href="#4-2-全局后置钩子" class="headerlink" title="4.2 全局后置钩子"></a>4.2 全局后置钩子</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">router.afterEach((to, from) =&gt; &#123; ... &#125;)</span><br></pre></td></tr></table></figure>
<h3 id="4-3-路由独享守卫"><a href="#4-3-路由独享守卫" class="headerlink" title="4.3 路由独享守卫"></a>4.3 路由独享守卫</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var routes = [</span><br><span class="line">    &#123; path: &#x27;/foo&#x27;, component: Foo, beforeEnter: (to, from. next) =&gt; &#123;&#125; &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h3 id="4-4-组件内的守卫"><a href="#4-4-组件内的守卫" class="headerlink" title="4.4 组件内的守卫"></a>4.4 组件内的守卫</h3><ul>
<li><p>1、beforeRouteEnter， 只有它支持给 next传递回调</p>
</li>
<li><p>2、beforeRouteUpdate</p>
</li>
<li><p>3、beforeRouteLeave</p>
</li>
<li><p>``<br>var myComp = {<br>  template: ‘’,<br>  beforeRouteEnter: (to, from, next) =&gt; {</p>
<pre><code>  // 当前不能获取组件实例
  // 不过可以使用给next传递回调来访问，
  next(vm =&gt; &#123;
      // 通过vm访问组件实例
  &#125;)
</code></pre>
<p>  },<br>  brforeRouteUpdate: (to, from, next) =&gt; {</p>
<pre><code>  // 可以获取当前组件实例
  //同时 可以监听动态路由参数的变化
</code></pre>
<p>  }，<br>  beforeRouteLeave: (to, from, next) =&gt; {</p>
<pre><code>  // 可以获取当前组件实例
</code></pre>
<p>  }<br>}<br>``<br>路由元信息 meta字段 通过 遍历$route.matched数据检查路由中的meta字段。</p>
</li>
<li><p>路由切换时，我们需要获取数据进行页面渲染，获取数据有两种方式：</p>
</li>
</ul>
<ul>
<li>1、导航完成之后获取：先完成导航，然后在组件生命周期获取数据，给页面加上loading状态</li>
<li>2、导航完成之前获取：在路由进入守卫之前获取数据，获取数据完毕之后跳转路由，注意，这里获取数据还保留在当前页面，也需要加进度条显示正加载页面。<br>路由懒加载：只有访问到该路由，再去加载对应组件</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var routes = [</span><br><span class="line">    &#123;path: &#x27;/foo&#x27;, component: () =&gt; import(&#x27;./foo.vue&#x27;)&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/08/frame/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="李泼泼">
      <meta itemprop="description" content="向着目标奔跑！！！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lucky Girl">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/08/frame/" class="post-title-link" itemprop="url">React & Vue</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-08 17:17:47" itemprop="dateCreated datePublished" datetime="2020-08-08T17:17:47+08:00">2020-08-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-08 22:07:58" itemprop="dateModified" datetime="2022-05-08T22:07:58+08:00">2022-05-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%A1%86%E6%9E%B6/" itemprop="url" rel="index"><span itemprop="name">框架</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="一、React基础"><a href="#一、React基础" class="headerlink" title="一、React基础"></a>一、React基础</h3><ul>
<li>react 用于构建用户界面的渐进式JAVASCRIPT库，第一个真正意义上组件化思想</li>
</ul>
<pre><code>- 本身只处理UI（数据驱动视图）
- 不处理AJAX
- 不关系路由
</code></pre>
<h4 id="1-react特点"><a href="#1-react特点" class="headerlink" title="1.react特点"></a>1.react特点</h4><ul>
<li><p>组件化</p>
</li>
<li><p>高效，虚拟DOM</p>
</li>
<li><p>灵活，渐进式，本身只处理UI，可以结合其他技术</p>
</li>
<li><p>声明式设计</p>
<ul>
<li>data响应式数据</li>
<li>methods处理函数</li>
<li>特点组件生命钩子</li>
<li>方法就是类成员</li>
</ul>
</li>
<li><p>JSX</p>
<ul>
<li>一种预编译javascript语言，允许你的js和HTML混搭</li>
<li>模板中就是JS逻辑</li>
</ul>
</li>
<li><p>单向数据流</p>
<ul>
<li>所有数据都是单向的，组件床底的数据都是单向的只能父组件=&gt;子组件</li>
<li>vue也是单向数据流</li>
<li>没有双向数据绑定<h4 id="2-react与vue对比"><a href="#2-react与vue对比" class="headerlink" title="2.react与vue对比"></a>2.react与vue对比</h4></li>
</ul>
</li>
<li><p>vue生产力更高，react技术占比比较重</p>
</li>
<li><p>两个框架都采用虚拟DOM</p>
</li>
<li><p>组件化</p>
</li>
<li><p>数据绑定</p>
<ul>
<li>都支持数据驱动视图</li>
<li>vue支持表单控件的双向数据绑定</li>
<li>react不支持双向数据绑定</li>
</ul>
</li>
<li><p>核心库很小，渐进式js库</p>
</li>
<li><p>React采用JSX语法编写组件</p>
</li>
<li><p>Vue采用单文件组件</p>
<ul>
<li>template，script，style<h4 id="3-react基础"><a href="#3-react基础" class="headerlink" title="3.react基础"></a>3.react基础</h4></li>
</ul>
</li>
<li><p>云端编程环境 只适用于demo测试</p>
</li>
<li><p>脚手架工具 <code>create-react-app</code></p>
<ul>
<li>类似于vue-cli</li>
<li>集成了webpack</li>
</ul>
</li>
<li><p>@babel/standalone 的作用是可以在浏览器中完成es6到es5的转换</p>
<ul>
<li>是一个独立的编译工具，支持调用它的api完成es6=&gt;es5</li>
</ul>
</li>
<li><p>react的核心理念：组件化，不支持管理dom模板，他必须把所有的模板放在组件中</p>
<h4 id="4-JSX环境-type-”text-babel”"><a href="#4-JSX环境-type-”text-babel”" class="headerlink" title="4.JSX环境 type=”text/babel”"></a>4.JSX环境 type=”text/babel”</h4></li>
<li><p>非模块化环境</p>
<ul>
<li>babel-standalone</li>
<li>执行编译，速度慢</li>
<li>只是用开发测试环境</li>
</ul>
</li>
<li><p>模块化环境</p>
<ul>
<li>结合webpack配置babel响应的工具完成预编译</li>
<li>浏览器执行的是预编译结果</li>
<li>babel-preset-react</li>
</ul>
</li>
<li><p>jsx语法基本使用</p>
<ul>
<li>必须有一个根节点</li>
</ul>
</li>
<li><p>jsx注释</p>
<ul>
<li>单行注释  {/**/}</li>
<li>多行注释 { /*</li>
</ul>
<p>  */}</p>
</li>
<li><p>动态属性 </p>
<ul>
<li>class使用className对应类名</li>
<li>for使用htmlfor</li>
<li>属性使用表达式 title={user.name}</li>
</ul>
</li>
<li><p>单标签要/闭合</p>
</li>
<li><p>事件绑定 onClick={fname}</p>
<ul>
<li>使用驼峰命名</li>
<li>必须绑定一个函数</li>
<li>不能使用字符串方式，一定要使用{函数}来绑定<h4 id="5-React修改视图数据"><a href="#5-React修改视图数据" class="headerlink" title="5.React修改视图数据"></a>5.React修改视图数据</h4></li>
</ul>
</li>
<li><p>this.setState({}) 不能使用this.state.propName</p>
</li>
<li><p> 命令行 hs -c-l -o</p>
<h3 id="二、VUE"><a href="#二、VUE" class="headerlink" title="二、VUE"></a>二、VUE</h3><h4 id="1-使用vue"><a href="#1-使用vue" class="headerlink" title="1.使用vue"></a>1.使用vue</h4></li>
<li><p>1.引包</p>
</li>
<li><p>2.创建vue实例化对象 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var vm = new Vue(&#123;</span><br><span class="line">   		   el:&#x27;#app&#x27;, </span><br><span class="line">     &#125;) </span><br></pre></td></tr></table></figure></li>
<li><p>vue核心：数据发生改变时，视图也会发生改变（数据驱动视图）</p>
<h4 id="2-指令系统"><a href="#2-指令系统" class="headerlink" title="2.指令系统"></a>2.指令系统</h4></li>
<li><p>： 双大括号插值</p>
</li>
<li><p>v-text：   innerText</p>
</li>
<li><p>v-html：   innerHTML</p>
</li>
<li><p>v-if：    条件渲染  如果属性对应的值为假则不在页面渲染，也就是不创建该dom元素添加到页面中，因为是dom元素的创建与销毁，切换开销大</p>
</li>
<li><p>v-show： 就是控制css中display样式属性，如果对应属性值为真，即为给该dom的display样式设置为block,否则设置为none。需要频繁切换时推荐使用</p>
</li>
<li><p>v-bind：  绑定标签属性，v-bind:class={active:true} ==&gt; 简写 :class={active:true}</p>
</li>
<li><p>v-on:eventName：  绑定事件  简写@事件名</p>
</li>
<li><p>v-for = “(item,index) in arr”</p>
</li>
<li><p>v-model ： 双向绑定数据，只体现在ui控件上(要有value属性) 是v-on:input 和v-bind:value 的语法糖</p>
<h4 id="3-局部组件和全局组件"><a href="#3-局部组件和全局组件" class="headerlink" title="3.局部组件和全局组件"></a>3.局部组件和全局组件</h4></li>
<li><p>局部组件</p>
<ul>
<li>1.声子<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> var App = &#123;</span><br><span class="line">	data()&#123;</span><br><span class="line">		return &#123;&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	template:&#x27;&lt;div&gt;我是入口组件&lt;/div&gt;&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>2.挂子 在vue实例对象的components属性中声明 components:{App}</li>
<li>3.用子 在vue实例对象的template属性中就可以使用该局部组件了 template:’<App />‘</li>
</ul>
</li>
<li><p>全局组件</p>
<ul>
<li>全局组件的创建<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(&#x27;componentName&#x27;,&#123;</span><br><span class="line">		   ...options</span><br><span class="line">	   &#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="4-父子组件通信"><a href="#4-父子组件通信" class="headerlink" title="4.父子组件通信"></a>4.父子组件通信</h4><ul>
<li>父给子传<ul>
<li>1.父组件绑定自定义的属性</li>
<li>2.在子组件中使用props接收父组件传递的数据（绑定的属性值）</li>
<li>3.在子组件任意使用</li>
</ul>
</li>
<li>子传父<ul>
<li>1.在父组件上绑定自定义事件</li>
<li>2.在子组件中触发原生的事件，在该事件函数中使用$emit触发父组件的自定义事件 $emit(事件名，消息)<h4 id="5-过滤器"><a href="#5-过滤器" class="headerlink" title="5.过滤器"></a>5.过滤器</h4></li>
</ul>
</li>
<li>作用：为页面中数据进行添油加醋功能</li>
<li>全局过滤器： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vue.filter(过滤器名,fn)</span><br></pre></td></tr></table></figure></li>
<li>局部过滤器：<ul>
<li>声明过滤器<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;数据 | 过滤器名 &#125;&#125;</span><br></pre></td></tr></table></figure></li>
<li>在组件内加filters属性<h4 id="6-watch监听属性（简单数据）"><a href="#6-watch监听属性（简单数据）" class="headerlink" title="6.watch监听属性（简单数据）"></a>6.watch监听属性（简单数据）</h4></li>
</ul>
</li>
<li>简单监视<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> watch:&#123;</span><br><span class="line">param:function(newVal,oldVal)&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>深度监视<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">watch:&#123;</span><br><span class="line">		arr: &#123;</span><br><span class="line">		  deep:true,</span><br><span class="line">		  handle:function(newV,oldV)&#123;</span><br><span class="line">			  </span><br><span class="line">		  &#125;</span><br><span class="line">	    &#125;  </span><br><span class="line">	  &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="7-methods与computed计算属性比较"><a href="#7-methods与computed计算属性比较" class="headerlink" title="7.methods与computed计算属性比较"></a>7.methods与computed计算属性比较</h4><pre><code>+ 1、使用methods方法完成计算业务缺点：
  -  只要调用一次计算方法，真个计算方法都会执行一次，如果在一个页面中多次使用到计算结果，可能会造成重复计算，导致页面加载性能变低
+ 2、computed：vue提供的一个计算属性
  - 作用： 在完成某种业务是，往往页面结果需要经过多次计算才能获取，computed属性就是用来完成业务结果多次计算
  - 优点： 在完成计算同时也会将本次计算结果缓存，如果数据没有发生变化，在页面中多次使用，计算方法仅仅执行一次
  - 使用： &#123;&#123; 属性名称 &#125;&#125;  
</code></pre>
<h4 id="8-事件修饰符"><a href="#8-事件修饰符" class="headerlink" title="8.事件修饰符"></a>8.事件修饰符</h4><pre><code>+ 作用：用来和事件连用，觉得事件触发条件和决定事件触发机制
+ 1、常用事件修饰符（可以连用）
  - .stop  停止事件冒泡
  - .prevent  阻止默认行为
  - .self  只触发自身行为
  - .once   只能让事件执行一次
+ 2、按键修饰符
  - 作用： 与键盘的按键事件(keyup keydown ...)绑定在一起，用来修饰特定的按键事件的修饰符
  - .enter   @keyup.enter.delete  只会监听回车按键,删除键抬起
  - .tab
  - .delete
  - .space
  - .esc
  - .down
  - .up
  - .left
  - .right
</code></pre>
<h4 id="9-vue组件的生命周期"><a href="#9-vue组件的生命周期" class="headerlink" title="9.*vue组件的生命周期"></a>9.*vue组件的生命周期</h4><p>   <img src="../images/lifecycle.png" alt="vue组件的生命周期"><br>初始化阶段：</p>
<ul>
<li>1.beforeCreate()  </li>
</ul>
<pre><code>- 组件创建之前,注意：在这个函数执行的时候vue实例仅仅完成内部事件和使用生命周期方法初始化
</code></pre>
<ul>
<li>2.created()       </li>
</ul>
<pre><code>- 组件创建之后，可以操作后端数据，数据驱动视图 
- 注意：在这个函数执行的时候vue实例已经完成自定义data、methods、computed等属性初始化以及语法校验
- 应用：发起AJAX请求
</code></pre>
<ul>
<li>3.beforeMount()   </li>
</ul>
<pre><code>- 挂载数据到DOM之前
- 注意：在这个函数执行的时候，vue实例仅仅是将el属性指向html编译成vue模板，此刻并没有完成模板内容赋值，也就是&lt;h1&gt;&#123;&#123;msg&#125;&#125;&lt;/h1&gt;
</code></pre>
<ul>
<li>4.mounted()      </li>
</ul>
<pre><code>- 挂载数据到DOM之后  可操作dom
- 注意：在这个函数执行的时候vue实例会将data数据渲染到编译的模板中并形成虚拟dom，替换el指向dom
</code></pre>
<p>运行阶段：（执行多次）</p>
<ul>
<li>5.deforeUpdate()  </li>
</ul>
<pre><code>- 更新DOM之前   可以获取原始的DOM
- 注意：在这个函数执行的时候vue实例的data数据发生改变，但是页面中的数据还是原始数据
</code></pre>
<ul>
<li>6.updated()       </li>
</ul>
<pre><code>- 更新dom之后   可以获取最新的DOM
- 注意：在这个函数执行的时候，vue实例中的data数据与页面中数据已经一致
</code></pre>
<p>销毁阶段：</p>
<ul>
<li>7.beforeDestroy() </li>
</ul>
<pre><code>- 组件销毁之前
- 注意： 在这个函数执行的时候vue实例仅仅开始销毁 data methods...还在
</code></pre>
<ul>
<li>8.destroyed()     </li>
</ul>
<pre><code>- 组件销毁之后
- 注意：在这个函数执行的时候vue实例的event childcomponents 监听机制 全部清空 
</code></pre>
<ul>
<li>更多<ul>
<li>actived    组件被激活</li>
<li>deactived  组件被使用</li>
<li>vue的内置组件 <keep-alive></keep-alive> （缓存机制）可以再组件的切换过程中将状态保留在内存中，防止重复渲染DOM<h4 id="10-组件通信5种方式"><a href="#10-组件通信5种方式" class="headerlink" title="10.组件通信5种方式"></a>10.组件通信5种方式</h4></li>
</ul>
</li>
<li>1.props和$emit:父组件向子组件传递数据是通过prop传递的，子组件传数据给父组件是通过$emit触发事件来完成的。<ul>
<li>父组件传递msg数据给子组件，并通过v-on绑定了一个自定义事件来监听子组件的触发事件</li>
<li>子组件通过props获取到msg数据，通过this.$emit触发父组件绑定的自定义事件<figure class="highlight plaintext"><figcaption><span>html></span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">	&lt;head&gt;</span><br><span class="line">		&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">		&lt;title&gt;组件通信&lt;/title&gt;</span><br><span class="line">		&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;/head&gt;</span><br><span class="line">	&lt;body&gt;</span><br><span class="line">		&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">			&lt;Parent&gt;&lt;/Parent&gt;</span><br><span class="line">			&lt;Parent1&gt;&lt;/Parent1&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">		&lt;script&gt;</span><br><span class="line">			Vue.component(&#x27;Parent&#x27;,&#123;</span><br><span class="line">				data()&#123;</span><br><span class="line">					return &#123;</span><br><span class="line">					    msg:&#x27;父组件数据&#x27;	</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;,</span><br><span class="line">				template:`&lt;div&gt;</span><br><span class="line">				&lt;h6&gt;我是父组件&lt;/h6&gt;</span><br><span class="line">				&lt;Child :childdata=&quot;msg&quot; @changeData1=&quot;changeData&quot;/&gt;</span><br><span class="line">				&lt;/div&gt;`,</span><br><span class="line">				methods:&#123;</span><br><span class="line">					changeData(val)&#123;</span><br><span class="line">						console.log(val)</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;)</span><br><span class="line">			Vue.component(&#x27;Child&#x27;,&#123;</span><br><span class="line">				props:[&#x27;childdata&#x27;],</span><br><span class="line">				template:`&lt;div&gt;</span><br><span class="line">				&lt;h6&gt;我是子组件 &lt;/h6&gt;</span><br><span class="line">				&lt;input type=&quot;text&quot; v-model=&quot;childdata&quot; @input=&quot;changeData(childdata)&quot;&gt;</span><br><span class="line">				&#123;&#123;childdata&#125;&#125;</span><br><span class="line">				&lt;/div&gt;`,</span><br><span class="line">				methods:&#123;</span><br><span class="line">					changeData(val)&#123;</span><br><span class="line">						this.$emit(&#x27;changeData1&#x27;,val)</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;)</span><br><span class="line">			Vue.component(&#x27;Parent1&#x27;,&#123;</span><br><span class="line">				data()&#123;</span><br><span class="line">					return &#123;</span><br><span class="line">						msg:&#x27;父组件数据1&#x27;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;,</span><br><span class="line">				template:&#x27;&lt;Child1 :data=&quot;msg&quot; @changes=changedata&gt;&lt;/Child1&gt;&#x27;,</span><br><span class="line">				methods:&#123;</span><br><span class="line">					changedata:function(val)&#123;</span><br><span class="line">						console.log(val)</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				&#125;)</span><br><span class="line">				Vue.component(&#x27;Child1&#x27;,&#123;</span><br><span class="line">					props:[&#x27;data&#x27;],</span><br><span class="line">					template:`&lt;div&gt;</span><br><span class="line">					&lt;h1&gt;子组件我是&lt;/h1&gt;</span><br><span class="line">					&lt;input type=&quot;text&quot; v-model=&quot;data&quot; @input=&quot;changedata(data)&quot;/&gt;</span><br><span class="line">					&#123;&#123;data&#125;&#125;</span><br><span class="line">					&lt;/div&gt;`,</span><br><span class="line">					methods:&#123;</span><br><span class="line">						changedata:function(val)&#123;</span><br><span class="line">							this.$emit(&#x27;changes&#x27;,val)</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;)</span><br><span class="line">			var App = new Vue(&#123;</span><br><span class="line">				el:&#x27;#app&#x27;</span><br><span class="line">			&#125;)</span><br><span class="line">		&lt;/script&gt;</span><br><span class="line">	&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>2.$attrs和$listeners:解决很多个组件嵌套通信，父往子传使用$attrs  v-bind=”$attrs”</li>
<li>3.中央事件总线（兄弟组件）: 新建bus对象，通过bus.$emit触发事件，bus.$on监听触发的事件</li>
</ul>
<figure class="highlight plaintext"><figcaption><span>html></span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">	&lt;head&gt;</span><br><span class="line">		&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">		&lt;title&gt;兄弟组件通信&lt;/title&gt;</span><br><span class="line">		&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;/head&gt;</span><br><span class="line">	&lt;body&gt;</span><br><span class="line">		&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">			&lt;brother1&gt;&lt;/brother1&gt;</span><br><span class="line">			&lt;brother2&gt;&lt;/brother2&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">		&lt;script&gt;</span><br><span class="line">			Vue.prototype.bus=new Vue()</span><br><span class="line">			Vue.component(&#x27;brother1&#x27;,&#123;</span><br><span class="line">				data()&#123;</span><br><span class="line">					return &#123;</span><br><span class="line">						msg:&#x27;1&#x27;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;,</span><br><span class="line">				template:`&lt;div&gt;</span><br><span class="line">				我是兄1组件</span><br><span class="line">				&#123;&#123;msg&#125;&#125;</span><br><span class="line">				&lt;/div&gt;`,</span><br><span class="line">				mounted()&#123;</span><br><span class="line">					    this.bus.$on(&#x27;changes&#x27;,function(val)&#123;</span><br><span class="line">							console.log(val)</span><br><span class="line">							&#125;)</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;)</span><br><span class="line">			Vue.component(&#x27;brother2&#x27;,&#123;</span><br><span class="line">			  template:`&lt;div&gt;</span><br><span class="line">			  我是兄2组件</span><br><span class="line">			  &lt;button @click=&quot;changeData()&quot;&gt;发送&lt;/button&gt;</span><br><span class="line">			  &lt;/div&gt;`,</span><br><span class="line">			  methods:&#123;</span><br><span class="line">				  changeData()&#123;//点击触发</span><br><span class="line">				  console.log(this)</span><br><span class="line">					this.bus.$emit(&#x27;changes&#x27;,&#x27;兄2组件数据&#x27;)  </span><br><span class="line">				  &#125;</span><br><span class="line">			  &#125;</span><br><span class="line">			&#125;)</span><br><span class="line">			var App = new Vue(&#123;</span><br><span class="line">				el:&#x27;#app&#x27;</span><br><span class="line">			&#125;)</span><br><span class="line">		&lt;/script&gt;</span><br><span class="line">	&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>4.父组件通过provide来提供变量，然后在子组件中通过inject来注入变量。不论子组件有多深，只要调用了inject那么就可以注入provide中的数据。</li>
<li>而不是局限于只能从当前父组件的prop属性来获取数据，只要在父组件的生命周期内，子组件都可以调用。</li>
<li>5.$children 和 $parent<h4 id="11-获取dom元素"><a href="#11-获取dom元素" class="headerlink" title="11.获取dom元素"></a>11.获取dom元素</h4></li>
<li>this.$ref.xxx 此时需要给标签绑定属性 ref=’xxx’,如果是给组件加ref属性，那么我们获取到的是该组件</li>
<li>$nextTick()是在dom更新循环结束之后执行回调函数，在修改数据之后使用这个方法在回调中获取到更新之后的dom<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">	&lt;head&gt;</span><br><span class="line">		&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">		&lt;title&gt;&lt;/title&gt;</span><br><span class="line">		&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;/head&gt;</span><br><span class="line">	&lt;body&gt;</span><br><span class="line">		&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">			&lt;button ref=&quot;btn1&quot;&gt;按钮1&lt;/button&gt;</span><br><span class="line">			&lt;button ref=&quot;btn2&quot;&gt;按钮2&lt;/button&gt;</span><br><span class="line">			&lt;input type=&quot;text&quot; v-show=&quot;isShow&quot; ref=&quot;input&quot;&gt;</span><br><span class="line">			&lt;com ref=&quot;com&quot;&gt;&lt;/com&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">		&lt;script&gt;</span><br><span class="line">			Vue.component(&#x27;com&#x27;,&#123;</span><br><span class="line">				data()&#123;</span><br><span class="line">					return &#123;&#125;</span><br><span class="line">				&#125;,</span><br><span class="line">				template:`&lt;div&gt;&lt;h1&gt;componentA</span><br><span class="line">				&lt;/h1&gt;&lt;span&gt;感谢你曾来过&lt;/span&gt;&lt;/div&gt;`</span><br><span class="line">			&#125;)</span><br><span class="line">			var App = new Vue(&#123;</span><br><span class="line">				el:&#x27;#app&#x27;,</span><br><span class="line">				data()&#123;</span><br><span class="line">				return&#123;</span><br><span class="line">				  isShow:false</span><br><span class="line">				&#125;&#125;,</span><br><span class="line">				created()&#123;</span><br><span class="line">				  console.log(this.$refs.btn1)</span><br><span class="line">				 </span><br><span class="line">				&#125;,</span><br><span class="line">				mounted()&#123;</span><br><span class="line">					console.log(this.$refs.btn1)</span><br><span class="line">					console.log(this.$refs.com)</span><br><span class="line">					this.isShow = true</span><br><span class="line">					// this.$refs.input.focus()</span><br><span class="line">					this.$nextTick(function()&#123;</span><br><span class="line">							this.$refs.input.focus()</span><br><span class="line">					&#125;)</span><br><span class="line">				&#125;,</span><br><span class="line">			&#125;)</span><br><span class="line">			</span><br><span class="line">		&lt;/script&gt;</span><br><span class="line">	&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="12-路由导航"><a href="#12-路由导航" class="headerlink" title="12.路由导航"></a>12.路由导航</h4><ul>
<li>编程式导航 this.$router.push(options)</li>
<li>声明式导航 <router-link to="xx"></router-link></li>
<li>导航守卫   router.beforeEach((to,from,next)=&gt;{      next();     })</li>
</ul>
<h4 id="三、axios的基本使用-gt-ajax异步请求技术"><a href="#三、axios的基本使用-gt-ajax异步请求技术" class="headerlink" title="三、axios的基本使用 =&gt; ajax异步请求技术"></a>三、axios的基本使用 =&gt; ajax异步请求技术</h4><p> axios文档 <a target="_blank" rel="noopener" href="http://www.axios-js.com/">中文网站</a></p>
<ul>
<li>1.特性</li>
</ul>
<ul>
<li>在浏览器中创建XMLHttpRequest</li>
<li>在nodejs创建http请求</li>
<li>支持Promise</li>
<li>拦截请求响应</li>
<li>自动转换JSON数据</li>
<li>支持XSRF防御</li>
<li>可以取消请求</li>
</ul>
<ul>
<li><p>2.GET方式请求</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">axios.get(url)</span><br><span class="line">  .then(function (response) &#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></li>
<li><p>3.POST方式请求</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">axios.post(url,params请求数据)</span><br><span class="line">  .then(function (response) &#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>4.axios的并发请求<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function getUserAccount() &#123;</span><br><span class="line">  return axios.get(&#x27;/user/12345&#x27;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function getUserPermissions() &#123;</span><br><span class="line">  return axios.get(&#x27;/user/12345/permissions&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">axios.all([getUserAccount(), getUserPermissions()])</span><br><span class="line">  .then(axios.spread(function (acct, perms) &#123;</span><br><span class="line">    // 两个请求都执行完成,拿到请求结果合并</span><br><span class="line">  &#125;));</span><br><span class="line">    axios.all([r1,r2])  并发请求</span><br><span class="line">    axios.spread(r1,r2)  合并请求</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><ol start="5">
<li>配置<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">axios.get(url,config)</span><br><span class="line">config的options:</span><br><span class="line">&#123;</span><br><span class="line"> //发送数据之前</span><br><span class="line"> transformRequest:[function(data)&#123;</span><br><span class="line">  //对data进行任意处理转换</span><br><span class="line">  return data;</span><br><span class="line"> &#125;],</span><br><span class="line"> //在传递给then(),catch()之前，允许修改数据，但是只能用在&#x27;PUT&#x27;,&#x27;POST&#x27;,&#x27;PATCH&#x27;几个请求</span><br><span class="line"> transformResponse:[function(data)&#123;</span><br><span class="line">  return data;</span><br><span class="line"> &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li><ol start="6">
<li>axios.defaults.baseURL = ‘’ 明确知道域名时配置</li>
</ol>
</li>
<li><p>7.请求拦截</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">axios.interceptor.request.use((config)=&gt;&#123;</span><br><span class="line"> //模拟cookie机制</span><br><span class="line"> var token = localStorage.getItem(&#x27;token&#x27;);</span><br><span class="line"> if(token)&#123;</span><br><span class="line">  config.headers[&#x27;token&#x27;] = token</span><br><span class="line"> &#125;</span><br><span class="line">&#125;,function(error)&#123;</span><br><span class="line"> return Promise.reject(error);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li><p>8.响应拦截</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">axios.interceptor.response.use((res)=&gt;&#123;&#125;,funciton(err)&#123;</span><br><span class="line"> return Promise.reject(err);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="四、webpack-打包工具-（静态资源-模块化开发）"><a href="#四、webpack-打包工具-（静态资源-模块化开发）" class="headerlink" title="四、webpack 打包工具 （静态资源 模块化开发）"></a>四、webpack 打包工具 （静态资源 模块化开发）</h3><ul>
<li><p>1.分析打包生成的build.js文件</p>
<ul>
<li>/*0 导出一个全局变量g,在web端指向window */</li>
<li>/* 1 导出入口文件mian.js的代码 一个vue实例对象 */</li>
<li>/* 2 vue源码本身 */</li>
<li>/* 3、4、5 都与node_modules/setimmediate有关  vue的dom异步更新机制*/</li>
<li>/* 6 导出APP.JS的代码 */</li>
</ul>
</li>
<li><p>2.配置文件 webpack.config.js(基于nodejs)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"> module.exports = &#123;</span><br><span class="line">  //入口文件</span><br><span class="line">  entry:&#123;&#x27;main.js&#x27;&#125;,</span><br><span class="line">  //出口文件</span><br><span class="line">  output:&#123;</span><br><span class="line">   path:&#x27;&#x27;,</span><br><span class="line">   filename:&#x27;&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  //文件监视改动 自动产出出口文件</span><br><span class="line">  watch:true,</span><br><span class="line">  //模块</span><br><span class="line">  module:[</span><br><span class="line">   //匹配规则</span><br><span class="line">   rule:[&#123;</span><br><span class="line">	   test:/reg/,</span><br><span class="line">	   use:[loader]</span><br><span class="line">   &#125;]</span><br><span class="line">  ],</span><br><span class="line">  //插件</span><br><span class="line">  plugin:[</span><br><span class="line">   </span><br><span class="line">  ]</span><br><span class="line"> &#125;</span><br><span class="line"> //for example</span><br><span class="line"> const path = require(&quot;path&quot;);</span><br><span class="line"> const  VueLoaderPlugin = require(&#x27;vue-loader/lib/plugin&#x27;);</span><br><span class="line"> const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);</span><br><span class="line"> module.exports = &#123;</span><br><span class="line"> 	mode: &#x27;development&#x27;,</span><br><span class="line"> 	entry: &#x27;./main.js&#x27;,</span><br><span class="line"> 	output:&#123;</span><br><span class="line"> 		path:path.resolve(__dirname,&#x27;dist&#x27;),</span><br><span class="line"> 		filename:&#x27;build.js&#x27;</span><br><span class="line"> 	&#125;,</span><br><span class="line"> 	module:&#123;</span><br><span class="line"> 		//遇到后缀为.css的文件，webpack先用css-loader加载器去解析这个文件</span><br><span class="line"> 		//最后计算完的css,将会使用style-loader生成一个内容为最终解析完的css代码</span><br><span class="line"> 	  rules:[</span><br><span class="line"> 		  &#123;</span><br><span class="line"> 			test:/\.css$/i,</span><br><span class="line"> 		    use:[&#x27;style-loader&#x27;,&#x27;css-loader&#x27;],</span><br><span class="line"> 		  &#125;,</span><br><span class="line"> 		  &#123;</span><br><span class="line"> 			  test: /\.(png|jpg|svg|jpeg|gif)$/i,</span><br><span class="line"> 			  use: [</span><br><span class="line"> 				  &#123;</span><br><span class="line"> 					  loader:&#x27;url-loader&#x27;,</span><br><span class="line"> 					  options:&#123;</span><br><span class="line"> 						  limit: 10000,</span><br><span class="line"> 					  &#125;,</span><br><span class="line"> 				  &#125;,</span><br><span class="line"> 			  ],</span><br><span class="line"> 		  &#125;,</span><br><span class="line"> 		  //转换es6语法</span><br><span class="line"> 		  &#123;</span><br><span class="line"> 			  test:/\.js$/,</span><br><span class="line"> 			  exclude:/node_modules/,</span><br><span class="line"> 			  use:&#123;</span><br><span class="line"> 				  loader:&#x27;babel-loader&#x27;,</span><br><span class="line"> 				  options:&#123;</span><br><span class="line"> 				  		presets:[&#x27;@babel/preset-env&#x27;],//处理关键字</span><br><span class="line"> 						plugins:[&#x27;@babel/plugin-transform-runtime&#x27;],//处理函数</span><br><span class="line"> 				  &#125;</span><br><span class="line"> 			  &#125;,</span><br><span class="line"> 			  </span><br><span class="line"> 		  &#125;,</span><br><span class="line">  //vue单文件引入1.依赖 vue-loader   2.插件VueLoaderPlugin</span><br><span class="line"> &lt;!--入口文件的 vue实例渲染就使用render函数：（需要npm i  vue-template-compiler）</span><br><span class="line"> 使用虚拟dom来渲染节点提升性能，因为他是基于JavaScript计算。</span><br><span class="line"> 通过使用createElement(h)来创建dom节点，createElement是render的核心方法。</span><br><span class="line"> vue编译的时候会把template里面的节点解析成虚拟dom</span><br><span class="line">  new Vue(&#123;</span><br><span class="line">  	el:&#x27;#app&#x27;,</span><br><span class="line">  	render: c =&gt;c(App)</span><br><span class="line">  &#125;) --&gt;</span><br><span class="line">  &#123;</span><br><span class="line">	test:/\.vue$/,</span><br><span class="line">	use:[&#x27;vue-loader&#x27;]</span><br><span class="line">  &#125;,</span><br><span class="line"> 		  &#123;</span><br><span class="line"> 			  test:/\.less$/,</span><br><span class="line"> 			  use:[&#x27;style-loader&#x27;,&#x27;css-loader&#x27;,&#x27;less-loader&#x27;]</span><br><span class="line"> 		  &#125;</span><br><span class="line"> 		],</span><br><span class="line"> 	&#125;,</span><br><span class="line"> 	plugins:[</span><br><span class="line">//输出到哪里</span><br><span class="line"> 		new HtmlWebpackPlugin(&#123;</span><br><span class="line">	//chunks主要用于多入口文件，当你有多个入口文件的时候，它就会编译生成多个打包后的文件，chunks就能选择你要使用那些js文件</span><br><span class="line">	chunks:[&#x27;common&#x27;,&#x27;vendor&#x27;,&#x27;main&#x27;],</span><br><span class="line"> 			template:&#x27;./index.html&#x27;,</span><br><span class="line">	inject:true,</span><br><span class="line">	//inject(注入)的值：true（注到html文件body底部） body（注到body底部） head（script注到head底部）</span><br><span class="line"> 		&#125;),</span><br><span class="line">new VueLoaderPlugin(),</span><br><span class="line"></span><br><span class="line"> 	],</span><br><span class="line"> 	watch:true,</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure></li>
<li><p>3.webpack-dev-server  常用配置参数</p>
</li>
</ul>
<pre><code>- --open 自动打卡浏览器
-  -- hot 热更新 需要插件 new webpack.HotModuleReplacementPlugin()
-  -- inline 自动更新
-  -- port xxx 指定端口号
-  -- process 显示编译进度
- 在package.json中的scripts属性内加
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;dev&quot;: &quot;webpack-dev-server --open --hot --inline --port 3000&quot;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>执行使用命令 npm run dev即可自动打开浏览器窗口显示页面</li>
</ul>
<ul>
<li>4.CommonsChunkPlugin的使用 （老版本）</li>
</ul>
<pre><code>- CommonChunkPlugin主要是用来提取第三方库和公共模块，避免首屏加载的bundle文件
 或者按需加载的bundle文件体积过大，从而导致加载时间过长。
- chunk分类
  · webpack配置的入口文件是chunk，理解为 entry chunk
  · 入口文件以及它的依赖文件通过code split出来的也是chunk 可以理解为children chunk
  · 通过CommonsChunkPlugin创建出来的文件也是chunk，理解为Commons chunk
- webpack 多入口文件
 1.抽离入口文件的公共模块
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&#x27;path&#x27;);</span><br><span class="line">const webpack = require(&quot;webpack&quot;);</span><br><span class="line">const packagejson = require(&#x27;./package.json&#x27;);</span><br><span class="line">module.exports =&#123;</span><br><span class="line">	entry:&#123;</span><br><span class="line">		&quot;main1&quot;: &quot;./main1.js&quot;,</span><br><span class="line">		&quot;main2&quot;: &quot;./main2.js&quot;,</span><br><span class="line">		&quot;vendor&quot;: Object.keys(packagejson.dependencies)//获取生产环境依赖的库</span><br><span class="line">	&#125;,</span><br><span class="line">	output:&#123;</span><br><span class="line">		path:path.resolve(__dirname,&#x27;dist&#x27;),</span><br><span class="line">		filename:&#x27;[name].js&#x27;</span><br><span class="line">	&#125;,</span><br><span class="line">	watch:true,</span><br><span class="line">	plugins:[</span><br><span class="line">		new webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">			name:[&#x27;vendor&#x27;],</span><br><span class="line">			filename:&#x27;[name].js&#x27;</span><br><span class="line">		&#125;)</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>打包运行成功之后如图所示：
</code></pre>
<p>   <img src="'./images/chunk.png'" alt="npm run dev"><br>   此时我们打开vendor.js文件发现main1.js和main2.js文件依赖的vue和common.js以及webpack的运行文件都被打包在这里，这样我们达到了提取公共模块的目的。</p>
<ul>
<li><ol start="5">
<li>上面虽然都分到一个js文件中，但是就会希望vendor.js中只有第三方库，所以我们要将自定义公共模块以及webpack运行文件单独分离出来。</li>
</ol>
<ul>
<li>1.先单独抽离出webpack运行文件<br> 修改webpack配置文件<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">   plugins: [</span><br><span class="line">	new webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">		name: [&#x27;vendor&#x27;,&#x27;runtime&#x27;],</span><br><span class="line">		filename: &#x27;[name].js&#x27;</span><br><span class="line">	&#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
上面代码其实等价于下面这个代码：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> plugins: [</span><br><span class="line"> 	new webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line"> 		name: [&#x27;vendor&#x27;],</span><br><span class="line"> 		filename: &#x27;[name].js&#x27;</span><br><span class="line"> 	&#125;),</span><br><span class="line">new webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">	name:[&#x27;runtime&#x27;],</span><br><span class="line">	filename:&#x27;[name].js&#x27;,</span><br><span class="line">	chunks:[&#x27;vendor&#x27;],//从vendor.js中抽离</span><br><span class="line">&#125;)</span><br><span class="line"> ]</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<p><img src="'./images/chunk2.png'" alt="抽离webpack运行时文件"><br>根据上图我们发现多了一个runtime.js文件，这个就是webpack运行时文件。</p>
<ul>
<li>*2.单独抽离第三方库和自定义公共模块<br>minChunks可以设置为数字、函数和Infinity，默认值是2.<br>minChunks的含义：<br>  1.数字：模块被多少个chunk公共引用才被抽取出来成为 commons chunk<br>  2.函数：接受(module,count)两个形参，返回一个布尔值，你可以在函数内进行你规定好的逻辑来决定某个模块是否<br>  提取成为commons chunk<br>  3.Infinity: 只有当入口文件个数&gt;=3才生效，用来在第三方库中分离自定义的公共模块。<br>minChunks设置为Infinity,修改webpack配置文件如下<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">plugins:[</span><br><span class="line">   new webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">	   name:[&#x27;vendor&#x27;,&#x27;runtime&#x27;],</span><br><span class="line">	   filename:&#x27;[name].js&#x27;,</span><br><span class="line">	   minChunks: Infinity //用来在第三方库中分离自定义的公共模块</span><br><span class="line">   &#125;),</span><br><span class="line">	new webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">		name:[&#x27;common&#x27;],</span><br><span class="line">		filename:&#x27;[name].js&#x27;,</span><br><span class="line">		chunks:[&#x27;main1&#x27;,&#x27;main2&#x27;],//从那几个入口文件中抽离公共模块</span><br><span class="line">	&#125;) </span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<img src="'./images/chunk3.png'" alt="抽离自定义公共模块"></li>
</ul>
<h3 id="从webpack-v4开始"><a href="#从webpack-v4开始" class="headerlink" title="从webpack v4开始"></a>从webpack v4开始</h3><ul>
<li>移除了 CommonsChunkPlugin，取而代之的是 optimization.splitChunks</li>
<li>splitChunks.chunks 类型为函数function(chunk) 或者字符串<ul>
<li>string值有：’all’(表示优化后的chunks可以包括异步和非异步modules.),’async’(优化异步模块的复用性),’initial’,</li>
</ul>
</li>
</ul>
<h4 id="webpack异步加载原理"><a href="#webpack异步加载原理" class="headerlink" title="webpack异步加载原理"></a>webpack异步加载原理</h4><ul>
<li>webpack.ensure的原理<br>把一些js模块给独立出一个个js文件，然后需要用到的时候，再创建一个script对象，加入到document.head对象中即可。<br>浏览器会自动发起请求这个js文件，再回调函数中定义的到这个js文件之后，需要做什么逻辑操作<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">异步加载a.js</span><br><span class="line">requie.resure([],function()&#123;</span><br><span class="line">	var a = require(&quot;./a.js&quot;);</span><br><span class="line">	alert(a.data);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/08/gitconf/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="李泼泼">
      <meta itemprop="description" content="向着目标奔跑！！！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lucky Girl">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/08/gitconf/" class="post-title-link" itemprop="url">hexo & next主题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-08 17:17:47" itemprop="dateCreated datePublished" datetime="2020-08-08T17:17:47+08:00">2020-08-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-04-16 17:11:25" itemprop="dateModified" datetime="2022-04-16T17:11:25+08:00">2022-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">前端开发</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-git-guide"><a href="#1-git-guide" class="headerlink" title="1. git guide"></a>1. git guide</h2><ol>
<li>npm i -g hexo 安装全局hexo</li>
<li>在一个空目录 hexo init 初始化博客系统</li>
<li>hexodir\source_posts 下的 .md 文档就是博客文档</li>
<li>撰写博客 新建 .md文件</li>
<li>把 md文件 转html  hexo g</li>
<li>cmd 中 hexo s –debug  后在浏览器 localhost:4000 查看格式</li>
<li>与 github 关联</li>
<li>npm i hexo-deployer-git –save 插件安装</li>
<li>配置文件 根目录下 _config.yml</li>
<li>更新blog使用命令 :1.hexo clean 2. hexo g -d</li>
</ol>
<h4 id="1-1-更新blog到github上出现如下错误"><a href="#1-1-更新blog到github上出现如下错误" class="headerlink" title="1.1 更新blog到github上出现如下错误"></a>1.1 更新blog到github上出现如下错误</h4><pre><code>ERROR: fatal: unable to access &#39;https://github.com/ly721/ly721.github.io.git/&#39;: OpenSSL
SSL_read: Connection was reset, errno 10054
GIT BASH 指令：env|grep -i proxy 两次
</code></pre>
<h4 id="1-2-git指令快速查询"><a href="#1-2-git指令快速查询" class="headerlink" title="1.2 git指令快速查询"></a>1.2 git指令快速查询</h4><p><img src="'./images/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.jpg'" alt="Git常用指令"></p>
<h4 id="1-3-github教程文章网址"><a href="#1-3-github教程文章网址" class="headerlink" title="1.3 github教程文章网址"></a>1.3 github教程文章网址</h4><p><a target="_blank" rel="noopener" href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/">廖雪峰-Git教程</a></p>
<h3 id="2-博客-使用-next-主题"><a href="#2-博客-使用-next-主题" class="headerlink" title="2. 博客 使用 next 主题"></a>2. 博客 使用 next 主题</h3><ul>
<li>下载next主题文件夹<ul>
<li>安装next主题到博客目录主题文件夹下<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$  git clone https://github.com/theme-next/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<ul>
<li>使用主题，更改站点配置文件 theme 字段值为 next</li>
</ul>
<ul>
<li>设置站点统计—-使用不蒜子统计</li>
</ul>
<ul>
<li><p>1.主题配置文件加入如下字段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">busuanzi_count:</span><br><span class="line"> # count values only if the other configs are false</span><br><span class="line"> enable: true</span><br><span class="line"> # custom uv span for the whole site</span><br><span class="line"> site_uv: true</span><br><span class="line"> site_uv_header: &lt;i class=&quot;fa fa-user&quot;&gt;&lt;/i&gt; 本站访问数</span><br><span class="line"> site_uv_footer: 人</span><br><span class="line"> # custom pv span for the whole site</span><br><span class="line"> site_pv: true</span><br><span class="line"> site_pv_header: &lt;i class=&quot;fa fa-eye&quot;&gt;&lt;/i&gt; 本站总访问量</span><br><span class="line"> site_pv_footer: 次</span><br><span class="line"> # custom pv span for one page only</span><br><span class="line"> page_pv: false</span><br><span class="line"> page_pv_header: &lt;i class=&quot;fa fa-file-o&quot;&gt;&lt;/i&gt; 本文总阅读量</span><br><span class="line"> page_pv_footer: 次</span><br></pre></td></tr></table></figure></li>
<li><p>2.在themes/next/layout/_partials/footer.swig 文件加入</p>
</li>
</ul>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if theme.busuanzi_count.enable %&#125;</span><br><span class="line">&lt;div class=&quot;busuanzi-count&quot;&gt;</span><br><span class="line">  &lt;script async src=&quot;https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js&quot;&gt;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">  &#123;% if theme.busuanzi_count.site_uv %&#125;</span><br><span class="line">  &lt;span class=&quot;site-uv&quot;&gt;</span><br><span class="line">   &#123;&#123; theme.busuanzi_count.site_uv_header &#125;&#125;</span><br><span class="line">   &lt;span class=&quot;busuanzi-value&quot; id=&quot;busuanzi_value_site_uv&quot;&gt;&lt;/span&gt;</span><br><span class="line">   &#123;&#123; theme.busuanzi_count.site_uv_footer &#125;&#125;</span><br><span class="line">   &lt;/span&gt;</span><br><span class="line">   &#123;% endif %&#125;</span><br><span class="line">   </span><br><span class="line">   &#123;% if theme.busuanzi_count.site_pv %&#125;</span><br><span class="line">   &lt;span class=&quot;site-pv&quot;&gt;</span><br><span class="line">    &#123;&#123; theme.busuanzi_count.site_pv_header &#125;&#125;</span><br><span class="line">    &lt;span class=&quot;busuanzi-value&quot; id=&quot;busuanzi_value_site_pv&quot;&gt;&lt;/span&gt;</span><br><span class="line">    &#123;&#123; theme.busuanzi_count.site_pv_footer &#125;&#125;</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line">   &lt;/div&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>3.加入本站运行时间,在上面文件最后加入如下代码即可<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;span&gt;</span><br><span class="line">  &lt;span class=&quot;post-meta-divider&quot;&gt;|&lt;/span&gt;</span><br><span class="line">  本站已运行</span><br><span class="line">  &lt;span id=&quot;showDays&quot;&gt;&lt;/span&gt;</span><br><span class="line">&lt;/span&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  var seconds = 1000;</span><br><span class="line">  var minutes = seconds * 60;</span><br><span class="line">  var hours = minutes * 60;</span><br><span class="line">  var days = hours * 24;</span><br><span class="line">  var years = days * 365;</span><br><span class="line">  var birthDay = Date.UTC(2019,01,20,14,00,00); // 这里设置建站时间</span><br><span class="line">  setInterval(function() &#123;</span><br><span class="line">    var today = new Date();</span><br><span class="line">    var todayYear = today.getFullYear();</span><br><span class="line">    var todayMonth = today.getMonth()+1;</span><br><span class="line">    var todayDate = today.getDate();</span><br><span class="line">    var todayHour = today.getHours();</span><br><span class="line">    var todayMinute = today.getMinutes();</span><br><span class="line">    var todaySecond = today.getSeconds();</span><br><span class="line">    var now = Date.UTC(todayYear,todayMonth,todayDate,todayHour,todayMinute,todaySecond);</span><br><span class="line">    var diff = now - birthDay;</span><br><span class="line">    var diffYears = Math.floor(diff/years);</span><br><span class="line">    var diffDays = Math.floor((diff/days)-diffYears*365);</span><br><span class="line">    var diffHours = Math.floor((diff-(diffYears*365+diffDays)*days)/hours);</span><br><span class="line">    var diffMinutes = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours)/minutes);</span><br><span class="line">    var diffSeconds = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours-diffMinutes*minutes)/seconds);</span><br><span class="line">      document.getElementById(&#x27;showDays&#x27;).innerHTML=&quot;&quot;+diffYears+&quot;年&quot;+diffDays+&quot;天&quot;+diffHours+&quot;小时&quot;+diffMinutes+&quot;分钟&quot;+diffSeconds+&quot;秒&quot;;</span><br><span class="line">  &#125;, 1000);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li>设置头像、背景图片等</li>
</ul>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 主题配置文件</span><br><span class="line">avatar:</span><br><span class="line">  # Replace the default image and set the url here.</span><br><span class="line">  # 将头像放到 themes/next/source/images目录</span><br><span class="line">  url: /images/avatar.jpg</span><br><span class="line">  </span><br><span class="line"># 找到themes/next/source/css/main.styl样式文件，设如下自定义样式即可 </span><br><span class="line">// 自定义样式</span><br><span class="line">body &#123;</span><br><span class="line">  background: url(../images/bg.jpg);</span><br><span class="line">	background-repeat: no-repeat;</span><br><span class="line">	background-position: 50% 50%;</span><br><span class="line">	background-attachment: fixed;</span><br><span class="line">  color: var(--text-color);</span><br><span class="line">  font-family: &#x27;Lato&#x27;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;</span><br><span class="line">  font-size: 1em;</span><br><span class="line">  line-height: 2;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<ul>
<li>设置看板娘</li>
</ul>
<ul>
<li>1.安装插件<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-helper-live2d</span><br></pre></td></tr></table></figure></li>
<li>2.选择你想要的看板娘模型，安装，在这里我使用的是koharu<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install live2d-widget-model-koharu</span><br></pre></td></tr></table></figure></li>
<li>3.在站点配置文件加入如下字段<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">live2d:</span><br><span class="line">  enable: true</span><br><span class="line">  scriptFrom: local</span><br><span class="line">  pluginRootPath: live2dw/</span><br><span class="line">  pluginJsPath: lib/</span><br><span class="line">  pluginModelPath: assets/</span><br><span class="line">  tagMode: false</span><br><span class="line">  debug: false</span><br><span class="line">  model:</span><br><span class="line">    use: live2d-widget-model-koharu</span><br><span class="line">  display:</span><br><span class="line">    position: left</span><br><span class="line">    width: 175</span><br><span class="line">    height: 350</span><br><span class="line">  mobile:</span><br><span class="line">    show: true</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/08/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="李泼泼">
      <meta itemprop="description" content="向着目标奔跑！！！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lucky Girl">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/08/index/" class="post-title-link" itemprop="url">微信小程序开发</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-08 17:17:47" itemprop="dateCreated datePublished" datetime="2020-08-08T17:17:47+08:00">2020-08-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-04-16 17:13:38" itemprop="dateModified" datetime="2022-04-16T17:13:38+08:00">2022-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" itemprop="url" rel="index"><span itemprop="name">微信小程序</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="原生目录框架"><a href="#原生目录框架" class="headerlink" title="原生目录框架"></a>原生目录框架</h3><p><img src="C:\Users\李悦\Desktop\vue-all-project\git-next-blog\source\images\wx01.png" alt="微信原生目录解析"></p>
<h4 id="1、配置文件"><a href="#1、配置文件" class="headerlink" title="1、配置文件"></a>1、配置文件</h4><p>1、页面配置文件</p>
<p>控制页面导航栏，也可以后期添加自定义组件</p>
<p>2、全局配置文件</p>
<h4 id="2、模板语法"><a href="#2、模板语法" class="headerlink" title="2、模板语法"></a>2、模板语法</h4><p>text标签 ：</p>
<p>相当于web中的span标签 行内元素</p>
<p>(加属性 selectable可以实现长按文字复制 )</p>
<p>(属性decode  对文字进行解码）</p>
<p>view标签：</p>
<p> 相当于web中的div标签 块级元素</p>
<p>checkbox 标签：就是复选框</p>
<h5 id="2-1、数据绑定"><a href="#2-1、数据绑定" class="headerlink" title="2.1、数据绑定"></a>2.1、数据绑定</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;view&gt;  &#123;&#123;msg&#125;&#125;  &lt;/view&gt;</span><br></pre></td></tr></table></figure>

<p>列表循环</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wx:for=&quot;&#123;&#123;数组or对象&#125;&#125;&quot;</span><br><span class="line">wx:for-item=&quot;循环项的名称&quot;</span><br><span class="line">wx:for-index=&quot;循环项的索引&quot;</span><br><span class="line">wx:key=&quot;唯一值&quot;   提高列表渲染性能</span><br><span class="line">  wx:key=&quot;*this&quot; 表示你的数组是一个普通数组 *this 表示循环项</span><br></pre></td></tr></table></figure>

<h5 id="2-2、事件绑定"><a href="#2-2、事件绑定" class="headerlink" title="2.2、事件绑定"></a>2.2、事件绑定</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">绑定事件关键字bind</span><br><span class="line">&lt;input type=&quot;text&quot; bindinput=&#x27;functionName(e)&#x27;/&gt; </span><br><span class="line">bindtap 绑定点击事件 事件绑定不能传参 只能通过自定义属性传参</span><br></pre></td></tr></table></figure>

<h5 id="2-3、数据赋值"><a href="#2-3、数据赋值" class="headerlink" title="2.3、数据赋值"></a>2.3、数据赋值</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">this.setData(&#123;</span><br><span class="line">数据名:值</span><br><span class="line">&#125;)</span><br><span class="line">获取值： this.data.数据名</span><br></pre></td></tr></table></figure>



<h4 id="3、样式"><a href="#3、样式" class="headerlink" title="3、样式"></a>3、样式</h4><p>1、尺寸</p>
<p>a、设计稿 750</p>
<p> 1rpx=0.5px</p>
<p>b、存在一个设计稿 page 存在一个元素宽度100px</p>
<p>  page px = 750 rpx</p>
<p>  1px = 750 rpx / page</p>
<p>  100px = 750 rpx * 100 / page</p>
<p> 利用calc属性：(数字与rpx不要空格，运算符两边也不要空格)</p>
<p> 下列假设page为375样式可这样写</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">width：calc(750rpx*100/375);</span><br></pre></td></tr></table></figure>

<p>2、样式路径引入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@import &#x27;&#x27;; 只能使用相对路径</span><br></pre></td></tr></table></figure>

<p>3、选择器</p>
<p>  a、不支持通配符 *</p>
<h5 id="3-1、标签"><a href="#3-1、标签" class="headerlink" title="3.1、标签"></a>3.1、标签</h5><h6 id="3-1-1image标签"><a href="#3-1-1image标签" class="headerlink" title="3.1.1image标签"></a>3.1.1image标签</h6><ul>
<li><p>微信小程序资源上传有大小限制，所以需要使用网图，可以将本地图片通过<a target="_blank" rel="noopener" href="https://imgurl.org/">在线图片转换</a>将图片变成网图在放到src属性</p>
</li>
<li><p>默认图片大小宽320px高240px</p>
</li>
<li><p>mode属性决定图片内容如何与图片标签宽高适配</p>
<p>a、scaleToFill   默认值  拉伸图片填满image标签</p>
<p>b、aspectFit  保持宽高比 确保图片长边完全显示 常用在轮播图</p>
<p>c、aspectFill   只保证图片短边完全显示</p>
<p>d、widthFix  宽度固定，高度按照比例调整</p>
</li>
<li><p>直接支持懒加载 lazy-load属性 </p>
<p>a、lazy-load 会自己判断当图片出现在视口上下三屏的高度之内的时候开始加载图片</p>
</li>
</ul>
<h6 id="3-1-2swiper标签"><a href="#3-1-2swiper标签" class="headerlink" title="3.1.2swiper标签"></a>3.1.2swiper标签</h6><p>a、是微信内置轮播图组件,  要与swiper-item（每一个轮播项）一起用</p>
<p>b、默认样式 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mode=&quot;widthFix&quot;</span><br><span class="line">&#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 150px;//高度无法实现内容撑开，可计算比例</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>c、设置适配</p>
<p>原图宽高 1125*352 px</p>
<p>swiper 宽度 / swiper 高度 = 原图宽度 / 原图高度</p>
<p>swiper 高度= swiper 宽度 * 原图高度 / 原图宽度</p>
<p>height: clac(100vw * 352 /  1152)</p>
<p>1vw = 视口宽度的1%</p>
<p>1vh = 视口高度的1%</p>
<p>d、属性</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>概述</th>
</tr>
</thead>
<tbody><tr>
<td>autoplay</td>
<td>boolean</td>
<td>是否自动轮播</td>
</tr>
<tr>
<td>interval</td>
<td>number</td>
<td>修改轮播时间</td>
</tr>
<tr>
<td>circular</td>
<td>boolean</td>
<td>是否循环轮播</td>
</tr>
<tr>
<td>indicator-dots</td>
<td>boolean</td>
<td>显示指示器，轮播图小圆点</td>
</tr>
<tr>
<td>indicator-color</td>
<td>color rgba(0,0,0,.3)</td>
<td>未选择时指示器的颜色</td>
</tr>
<tr>
<td>indicator-active-color</td>
<td>#000</td>
<td>选中指示器的颜色</td>
</tr>
</tbody></table>
<h6 id="3-1-3navigator标签"><a href="#3-1-3navigator标签" class="headerlink" title="3.1.3navigator标签"></a>3.1.3navigator标签</h6><p>a、是块级元素  会自动换行，相关属性如下</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>url</td>
<td>跳转页面路径</td>
</tr>
<tr>
<td>target</td>
<td>跳转目标  值1：self 值2：miniProgram</td>
</tr>
<tr>
<td>open-type</td>
<td>跳转方式</td>
</tr>
</tbody></table>
<p>b、open-type值</p>
<table>
<thead>
<tr>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>navigate</td>
<td>保留当前页面，跳转到程序某个页面，不包括tabbar页面</td>
</tr>
<tr>
<td>redirect</td>
<td>关闭当前页面，跳转到程序某个页面，不包括tabbar页面（无返回）</td>
</tr>
<tr>
<td>switchTab</td>
<td>跳到tabbar页面，关闭非tabbar页面</td>
</tr>
<tr>
<td>reLaunch</td>
<td>关闭所有页面，打开程序某个页面</td>
</tr>
<tr>
<td>exit</td>
<td>退出小程序，target=”miniProgram”时</td>
</tr>
</tbody></table>
<h6 id="3-1-4-rich-text富文本标签"><a href="#3-1-4-rich-text富文本标签" class="headerlink" title="3.1.4 rich-text富文本标签"></a>3.1.4 rich-text富文本标签</h6><p>nodes属性来实现，接收<strong>标签字符串</strong>或者数组对象</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;rich-text nodes=&quot;&#123;&#123;html&#125;&#125;&quot;&gt;&lt;/rich-text&gt;</span><br><span class="line"></span><br><span class="line">.js中</span><br><span class="line">data:&#123;</span><br><span class="line">// 1、标签字符串</span><br><span class="line">// html:`&lt;div class=&quot;context&quot;&gt;&lt;span&gt;odod&lt;/span&gt;jhfd&lt;/div&gt;`;</span><br><span class="line">// 2、数组对象</span><br><span class="line"> html:[</span><br><span class="line"> &#123;</span><br><span class="line"> name:&quot;div&quot;,</span><br><span class="line"> attrs:&#123;</span><br><span class="line">   class:&quot;mydiv&quot;,</span><br><span class="line">   style:&quot;color:white&quot;</span><br><span class="line"> &#125;,</span><br><span class="line"> children:[</span><br><span class="line">    &#123;</span><br><span class="line">    name:&#x27;span&#x27;,</span><br><span class="line">    attrs:&#123;&#125;,</span><br><span class="line">    children:[</span><br><span class="line">       &#123;</span><br><span class="line">         type:&#x27;text&#x27;,</span><br><span class="line">         text:&#x27;hello&#x27;</span><br><span class="line">       &#125;</span><br><span class="line">    ]</span><br><span class="line">    &#125;</span><br><span class="line"> ]</span><br><span class="line"> &#125;</span><br><span class="line"> ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="3-1-5-button标签"><a href="#3-1-5-button标签" class="headerlink" title="3.1.5 button标签"></a>3.1.5 button标签</h6><p>a、外观属性</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>size</td>
<td>string</td>
<td>default/mini</td>
<td>按钮大小</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>default灰/primary绿/warn红</td>
<td>按钮颜色</td>
</tr>
<tr>
<td>plain</td>
<td>boolean</td>
<td></td>
<td>背景透明</td>
</tr>
<tr>
<td>disabled</td>
<td>boolean</td>
<td></td>
<td>是否禁用</td>
</tr>
<tr>
<td>loading</td>
<td>boolean</td>
<td></td>
<td></td>
</tr>
<tr>
<td>form-type</td>
<td>string</td>
<td>submit提交/reset重置</td>
<td></td>
</tr>
<tr>
<td>open-type</td>
<td>string</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>b、<strong>open-type属性值</strong></p>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>contact</td>
<td>直接打开客服对话功能，需要在小程序后台配置                           1、只能通过真机调试打开</td>
</tr>
<tr>
<td>share</td>
<td>转发小程序到微信好友，但是不能到朋友圈</td>
</tr>
<tr>
<td>getPhoneNumber</td>
<td>获取当前用户的手机号码信息，结合事件使用，不是企业账号无权限获取                                                                      1、绑定一个事件bindgetphonenumber                          2、在事件回调函数中通过参数获取信息                           3、获取到的信息加密，需解析</td>
</tr>
<tr>
<td>getUserInfo</td>
<td>获取当前用户的个人信息，使用方法同上使用事件，信息未加密</td>
</tr>
<tr>
<td>launchApp</td>
<td>在小程序中直接打开app                                                              1、需要先在APP中通过APP的某个链接打开小程序               2、在小程序中载通过这个功能重新打开APP</td>
</tr>
<tr>
<td>openSetting</td>
<td>打开小程序内置的授权页面                                                        1、只会打开用户授权过的权限信息</td>
</tr>
<tr>
<td>feedback</td>
<td>打开小程序内置的意见反馈页面                                                1、只能通过真机调试打开</td>
</tr>
</tbody></table>
<p>c、open-type的contact实现流程</p>
<p>1、将小程序的appid由测试号改为自己的appid</p>
<p>2、登录<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/wxamp/home/guide?lang=zh_CN&token=812759988">微信小程序官网</a>，左侧选择客服—-添加</p>
<h6 id="3-1-6-icon标签"><a href="#3-1-6-icon标签" class="headerlink" title="3.1.6 icon标签"></a>3.1.6 icon标签</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;icon type=&quot;success&quot; color=&quot;red&quot; size=&quot;10&quot;&gt;&lt;/icon&gt;</span><br></pre></td></tr></table></figure>

<h6 id="3-1-7-radio（可以通过color属性修改颜色）"><a href="#3-1-7-radio（可以通过color属性修改颜色）" class="headerlink" title="3.1.7 radio（可以通过color属性修改颜色）"></a>3.1.7 radio（可以通过color属性修改颜色）</h6><p>a、必须与父元素radio-group使用</p>
<p>b、value属性  选中单选框的值</p>
<p>c、需要给radio-group绑定change事件</p>
<p>d、获取选中值e.detail.value</p>
<p>10、checkbox</p>
<p>a、需要与check-group一起使用</p>
<p>b、取到的值是数组</p>
<h5 id="3-2、自定义组件"><a href="#3-2、自定义组件" class="headerlink" title="3.2、自定义组件"></a>3.2、自定义组件</h5><h6 id="3-2-1、创建自定义组件"><a href="#3-2-1、创建自定义组件" class="headerlink" title="3.2.1、创建自定义组件"></a>3.2.1、创建自定义组件</h6><ul>
<li>1、组件的定义段</li>
</ul>
<table>
<thead>
<tr>
<th>定义段</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>properties</td>
<td>object map</td>
<td>否</td>
<td>组件对外属性</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>否</td>
<td>组件内部数据</td>
</tr>
<tr>
<td>observers</td>
<td>object</td>
<td>否</td>
<td>组件数据监听器，监听data和properties的变化</td>
</tr>
<tr>
<td>methods</td>
<td>object</td>
<td>否</td>
<td>组件方法</td>
</tr>
<tr>
<td>created</td>
<td>function</td>
<td>否</td>
<td>组件生命周期函数，组件实例被创建时执行，不能使用setData,参考<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/lifetimes.html">组件生命周期</a></td>
</tr>
<tr>
<td>attached</td>
<td>function</td>
<td>否</td>
<td>组件生命周期函数，组件实例进入页面节点树时执行,参考<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/lifetimes.html">组件生命周期</a></td>
</tr>
<tr>
<td>ready</td>
<td>function</td>
<td>否</td>
<td>组件生命周期函数，在组件布局完成后执行,参考<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/lifetimes.html">组件生命周期</a></td>
</tr>
<tr>
<td>moved</td>
<td>function</td>
<td>否</td>
<td>组件生命周期函数，组件实例被移动到节点数另一个位置时执行,参考<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/lifetimes.html">组件生命周期</a></td>
</tr>
<tr>
<td>detached</td>
<td>function</td>
<td>否</td>
<td>组件生命周期函数，在组件实例被从页面节点树移除时执行,参考<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/lifetimes.html">组件生命周期</a></td>
</tr>
</tbody></table>
<ul>
<li>2、引用组件</li>
</ul>
<p>​        1、创建组件</p>
<p>​        2、在需要引用组件的页面配置文件中添加属性usecomponent，引用所需组件</p>
<p>​         3、在该页面使用该组件</p>
<ul>
<li>3、注意：</li>
</ul>
<p>​     a、页面.js文件中存放事件回调函数的时候，存放在data同层级下。</p>
<p>​     b、组件.js文件中存放事件回调函数的时候必须放在methods中。</p>
<ul>
<li>4、父子组件传递数据</li>
</ul>
<p>​      a、父组件页面向子组件传递数据通过标签<strong>属性</strong>的值方式传递</p>
<p>​            i、在C:\Users\李悦\Desktop\vue-all-project\黑马商城案例\pages\goods_lists\goods_lists.wxml C:\Users\李悦\Desktop\vue-all-project\黑马商城案例\pages\goods_lists\goods_lists.js C:\Users\李悦\Desktop\vue-all-project\黑马商城案例\components\Tabs\Tabs.wxml C:\Users\李悦\Desktop\vue-all-project\黑马商城案例\components\Tabs\Tabs.js子组件上进行接收;</p>
<p>​            ii、把这个数据当成是data中的数据直接使用即可;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">父组件.wxml</span><br><span class="line">&lt;componentName pName=&quot;&#123;&#123;pArr&#125;&#125;&quot; bindItemChange=&quot;handleItemChange&quot;&gt;&lt;/componentName&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">子组件.wxml</span><br><span class="line">&lt;view wx:for=&quot;pArr&quot; wx:key=&quot;id&quot; data-index=&quot;&#123;&#123;index&#125;&#125;&quot;</span><br><span class="line">bindtap=&quot;handleItemTap&quot;</span><br><span class="line">&gt;&lt;/view&gt;</span><br><span class="line">子组件.js</span><br><span class="line">Components(&#123;</span><br><span class="line">  //存放要从父组件中接收的数据</span><br><span class="line">  properties:&#123;</span><br><span class="line">    //接收数据名</span><br><span class="line">    pName:&#123;</span><br><span class="line">     // type 接收数据的类型</span><br><span class="line">     type:Array,</span><br><span class="line">     // value  默认值</span><br><span class="line">     value:[]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  methods:&#123;</span><br><span class="line">    handleItemTap(e)&#123;</span><br><span class="line">     let &#123;pArr&#125; = this.data;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p> b、子向父传递数据 通过<strong>事件</strong>的方式传递</p>
<p>​       i、 在子组件的标签上加入一个自定义事件</p>
<p>​       ii、 子组件点击事件触发父组件中自定义事件 同时传递数据与参数给父组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">子组件.js</span><br><span class="line">this.triggerEvent(&quot;父组件自定义事件的名称（itemChange）&quot;，&#123;index&#125;要传递的参数)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">父组件.js</span><br><span class="line">//接收子组件传递的参数</span><br><span class="line">handleItemChange(e)&#123;</span><br><span class="line">  const &#123;index&#125; = e.detail.dataset</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-3api"><a href="#3-3api" class="headerlink" title="3.3api"></a>3.3api</h5><h6 id="3-3-1路由api"><a href="#3-3-1路由api" class="headerlink" title="3.3.1路由api"></a>3.3.1路由api</h6><table>
<thead>
<tr>
<th>api</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>wx.switchTab()</td>
<td>跳转到tabBar页面，并关闭其他所有非TabBar页面</td>
</tr>
<tr>
<td>wx.relaunch()</td>
<td>关闭所有页面，打开某个页面</td>
</tr>
<tr>
<td>wx.redirectTo()</td>
<td>关闭当前页面，跳转到应用某个页面，不允许跳到tabBar页面</td>
</tr>
<tr>
<td>wx.navigateTo()</td>
<td>保留当前页面，跳转到某个界面（不允许是tabBar页面），使用wx.navigateBack可以返回上一个页面</td>
</tr>
<tr>
<td>wx.navigateBack()</td>
<td>关闭当前页面，返回上一页面，可通过getCurrentPage获取当前页面栈，选择返回第几层</td>
</tr>
<tr>
<td>EventChannel</td>
<td>页面间事件通信通道   .emit(事件名，参数) 触发         .on(事件名，回调)监听            .once(事件名，回调) 监听一次               .off(事件名，回调)取消监听</td>
</tr>
</tbody></table>
<h6 id="3-1-2-跳转api"><a href="#3-1-2-跳转api" class="headerlink" title="3.1.2 跳转api"></a>3.1.2 跳转api</h6><h4 id="4、小程序生命周期"><a href="#4、小程序生命周期" class="headerlink" title="4、小程序生命周期"></a>4、小程序生命周期</h4><p>分为<strong>应用生命周期</strong>和<strong>页面生命周期</strong></p>
<h5 id="4-1、应用生命周期"><a href="#4-1、应用生命周期" class="headerlink" title="4.1、应用生命周期"></a>4.1、<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/App.html">应用生命周期</a></h5><table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>onLaunch</td>
<td>function</td>
<td>监听小程序初始化</td>
</tr>
<tr>
<td>onShow</td>
<td>function</td>
<td>监听小程序启动或切前台</td>
</tr>
<tr>
<td>onHide</td>
<td>function</td>
<td>监听小程序切后台</td>
</tr>
<tr>
<td>onError</td>
<td>function</td>
<td>错误监听函数</td>
</tr>
<tr>
<td>onPageNotFound</td>
<td>function</td>
<td>页面不存在监听函数</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// app.js   也就是我们全局的入口文件</span><br><span class="line">App(&#123;</span><br><span class="line">   // 1 应用第一次启动的时候就会触发的事件</span><br><span class="line">   onLaunch()&#123;</span><br><span class="line">      // 在应用第一次启动的时候 获取用户的个人信息</span><br><span class="line">   &#125;,</span><br><span class="line">   //2、应用被用户看到</span><br><span class="line">   onShow()&#123;</span><br><span class="line">      // 对应用数据或者页面效果重置</span><br><span class="line">   &#125;,</span><br><span class="line">   //3、应用隐藏</span><br><span class="line">   onHide()&#123;</span><br><span class="line">      // 暂停或者清除定时器</span><br><span class="line">   &#125;,</span><br><span class="line">   // 4、应用代码发生报错的时候就会触发</span><br><span class="line">   onError(err)&#123;</span><br><span class="line">     // 在应用发生代码报错的时候，收集用户的错误信息，通过异步请求，将错误信息发送到后台去。</span><br><span class="line">     console.log(err)</span><br><span class="line">   &#125;,</span><br><span class="line">   // 5、应用页面找不到就会触发</span><br><span class="line">   //应用第一次启动的时候，如果找不到第一个入口页面 才会触发</span><br><span class="line">   onPageNotFound()&#123;</span><br><span class="line">     // 如果页面不存在了，通过JS的方式来重新跳转页面 重新跳转到第二个首页</span><br><span class="line">     //不能跳转到tabbar页面</span><br><span class="line">     wx.navigateTo(&#123;</span><br><span class="line">       url:&#x27;pages/index2/index2&#x27;</span><br><span class="line">     &#125;)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="4-2、页面生命周期"><a href="#4-2、页面生命周期" class="headerlink" title="4.2、页面生命周期"></a>4.2、<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html">页面生命周期</a></h5><table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>data</td>
<td>object</td>
<td>页面的初始数据</td>
</tr>
<tr>
<td>onLoad</td>
<td>function</td>
<td>生命周期回调—-监听页面加载</td>
</tr>
<tr>
<td>onShow</td>
<td>function</td>
<td>生命周期回调—-监听页面显示</td>
</tr>
<tr>
<td>onReady</td>
<td>function</td>
<td>生命周期回调—-监听页面初次渲染完成</td>
</tr>
<tr>
<td>onHide</td>
<td>function</td>
<td>生命周期回调—-监听页面隐藏</td>
</tr>
<tr>
<td>onUnload</td>
<td>function</td>
<td>生命周期回调—-监听页面卸载</td>
</tr>
<tr>
<td>onPullDownRefresh</td>
<td>function</td>
<td>监听用户下拉动作</td>
</tr>
<tr>
<td>onReachBottom</td>
<td>function</td>
<td>监听页面上拉触底事件的处理函数</td>
</tr>
<tr>
<td>onShareAppMessage</td>
<td>function</td>
<td>用户点击右上角转发</td>
</tr>
<tr>
<td>onPageScroll</td>
<td>function</td>
<td>页面滚动触发事件的处理函数</td>
</tr>
<tr>
<td>onResize</td>
<td>function</td>
<td>页面尺寸发生改变时触发</td>
</tr>
<tr>
<td>onTabItemTap</td>
<td>function</td>
<td>当前是Tab页，点击Tab时触发</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">页面配置文件js</span><br><span class="line">Page(&#123;</span><br><span class="line">   data: &#123;</span><br><span class="line">     //页面初始数据</span><br><span class="line">   &#125;,</span><br><span class="line">   onLoad:function(options)&#123;</span><br><span class="line">     //onLoad发送异步请求来初始化页面数据</span><br><span class="line">   &#125;,</span><br><span class="line">   //页面下拉刷新触发的事件</span><br><span class="line">   onPullDownRefresh:function()&#123;</span><br><span class="line">   </span><br><span class="line">   &#125;,</span><br><span class="line">   // 页面上拉触底事件的处理函数</span><br><span class="line">   // 触发需要页面具备上下滚动的条件</span><br><span class="line">   onReachBottom: function()&#123;</span><br><span class="line">       // 上拉加载下一页数据</span><br><span class="line">   &#125;，</span><br><span class="line">   // 页面滚动就可以触发</span><br><span class="line">   onPageScroll:functon()&#123;</span><br><span class="line">   </span><br><span class="line">   &#125;,</span><br><span class="line">   // 小程序横竖屏变换</span><br><span class="line">   onResize:function()&#123;</span><br><span class="line">   </span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>onResize 设置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">需要小程序全局允许屏幕旋转在全局app.json中添加</span><br><span class="line">&#123;</span><br><span class="line">    &quot;pageOrientation&quot;: &quot;auto&quot;</span><br><span class="line">&#125;</span><br><span class="line">或者也可以只允许某个页面就在某个页面配置文件中添加</span><br></pre></td></tr></table></figure>

<h5 id="4-3-页面生命周期图解"><a href="#4-3-页面生命周期图解" class="headerlink" title="4.3 页面生命周期图解"></a>4.3 页面生命周期图解</h5><p><img src="C:\Users\李悦\Desktop\vue-all-project\git-next-blog\source\images\wxpage-lifecycle.png" alt="页面生命周期"></p>
<h4 id="5、小程序案例实现"><a href="#5、小程序案例实现" class="headerlink" title="5、小程序案例实现"></a>5、小程序案例实现</h4><h5 id="5-1小程序的第三方框架"><a href="#5-1小程序的第三方框架" class="headerlink" title="5.1小程序的第三方框架"></a>5.1小程序的第三方框架</h5><p>   1、腾讯 wepy (类似 vue)</p>
<p>   2、 美团 mpvue (类似 vue)</p>
<p>   3、京东 taro (类似react)</p>
<p>   4、 滴滴 chameleon </p>
<p>   5、 uni-app (类似 vue)</p>
<p>   6、原生框架MINA</p>
<h5 id="5-2、接口文档"><a href="#5-2、接口文档" class="headerlink" title="5.2、接口文档"></a>5.2、<a target="_blank" rel="noopener" href="https://www.showdoc.com.cn/128719739414963?page_id=2612486239891213">接口文档</a></h5><h5 id="5-3、项目搭建"><a href="#5-3、项目搭建" class="headerlink" title="5.3、项目搭建"></a>5.3、项目搭建</h5><p>1、搭建目录结构</p>
<table>
<thead>
<tr>
<th>目录名</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>components</td>
<td>组件</td>
</tr>
<tr>
<td>styles</td>
<td>公共样式</td>
</tr>
<tr>
<td>lib</td>
<td>第三方库</td>
</tr>
<tr>
<td>utils</td>
<td>帮助库</td>
</tr>
<tr>
<td>request</td>
<td>接口帮助库</td>
</tr>
</tbody></table>
<p>2、项目页面</p>
<table>
<thead>
<tr>
<th>页面名</th>
<th>程序中名</th>
</tr>
</thead>
<tbody><tr>
<td>首页</td>
<td>indexs</td>
</tr>
<tr>
<td>分类页面</td>
<td>categorys</td>
</tr>
<tr>
<td>商品列表页面</td>
<td>goods_lists</td>
</tr>
<tr>
<td>商品详情页面</td>
<td>goods_details</td>
</tr>
<tr>
<td>购物车页面</td>
<td>carts</td>
</tr>
<tr>
<td>收藏页面</td>
<td>collect</td>
</tr>
<tr>
<td>订单页面</td>
<td>orders</td>
</tr>
<tr>
<td>搜索页面</td>
<td>searchs</td>
</tr>
<tr>
<td>个人中心页面</td>
<td>users</td>
</tr>
<tr>
<td>意见反馈页面</td>
<td>feedbacks</td>
</tr>
<tr>
<td>登录页面</td>
<td>logins</td>
</tr>
<tr>
<td>授权页面</td>
<td>auths</td>
</tr>
<tr>
<td>结算页面</td>
<td>pays</td>
</tr>
</tbody></table>
<h5 id="5-4-iconfont字体图标库"><a href="#5-4-iconfont字体图标库" class="headerlink" title="5.4 iconfont字体图标库"></a>5.4 iconfont<a target="_blank" rel="noopener" href="https://www.iconfont.cn/search/index?searchType=icon&q=%E5%BA%94%E7%94%A8&page=1&fromCollection=1&fills=&tag=">字体图标库</a></h5><p>  原生wxss是支持变量的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">page&#123;</span><br><span class="line">  // 定义主题颜色</span><br><span class="line">  --themeColor:#ccc;</span><br><span class="line">  //定义统一字体大小 假设设计稿大小375px</span><br><span class="line">  // 1px = 2rpx</span><br><span class="line">  // 14px = 28rpx</span><br><span class="line">  font-size:28rpx;</span><br><span class="line">&#125;</span><br><span class="line">text&#123;</span><br><span class="line">//使用主题颜色</span><br><span class="line">  color:var(--themeColor);</span><br><span class="line">&#125;</span><br><span class="line">//后x个y标签</span><br><span class="line">y:nth-last-child(-n+x)</span><br></pre></td></tr></table></figure>

<h5 id="5-5-主页轮播图适配"><a href="#5-5-主页轮播图适配" class="headerlink" title="5.5 主页轮播图适配"></a>5.5 主页轮播图适配</h5><p>1、swiper标签默认宽高 100% * 150px</p>
<p>2、image标签默认宽高350px * 240px</p>
<p>3、图片大小 750 * 340</p>
<p>需要图片高度自适应让swiper标签高度和图片的高一样，宽度100%</p>
<h5 id="5-6-分类页面"><a href="#5-6-分类页面" class="headerlink" title="5.6 分类页面"></a>5.6 分类页面</h5><ul>
<li><p>如果从接口获取的数据量太大，我们需要对数据进行缓存</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wx.getStorageSync(&#x27;key&#x27;)</span><br><span class="line">wx.setStorageSync(&#x27;key&#x27;,&#x27;value&#x27;)</span><br></pre></td></tr></table></figure>

<p>web中本地存储和小程序中本地存储的区别：</p>
<p>1、使用方法不同</p>
<p>​      web中： localStorage.getItem(“key”)     localStorage.setItem(‘key’,’value’)</p>
</li>
</ul>
<p>​             小程序中：wx.getStorageSync(‘key’)        wx.setStorageSync(‘key’,’value’)</p>
<p>​       2、存数据的时候，有没有做类型转换</p>
<p>​             web：不论存入的是什么类型的数据，最终都会先调用toString()，把数据变成字符串，在进行存储。</p>
<p>​            小程序：没有类型转换这个操作，存什么类型数据进去，获取的时候就是什么类型</p>
<h6 id="5-6-1支持es7的async语法"><a href="#5-6-1支持es7的async语法" class="headerlink" title="5.6.1支持es7的async语法"></a>5.6.1支持es7的async语法</h6><p>1、在微信小程序开发工具项目配置中选择 es6转es5 语法</p>
<p>2、找到facebook的regenerator库中的 <a href="regenerator/packages/generator-runtime/runtime.js">regenerator/packages/generator-runtime/runtime.js</a></p>
<p>3、在小程序目录下新建目录 lib/runtime/runtime.js,将代码拷贝进去</p>
<p>4、在每一个需要使用async语法的页面js文件中，都引入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import regeneratorRuntime from &#x27;../../lib/runtime/runtime&#x27;;</span><br></pre></td></tr></table></figure>

<p>运行时发现报错   Function(…) is not a function</p>
<p>解决方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">修改runtime.js文件</span><br><span class="line">1、将var runtime 改为regeneratorRuntime</span><br><span class="line">2、删除文件最后try catch语句</span><br><span class="line">   try &#123;</span><br><span class="line">    regeneratorRuntime = runtime;</span><br><span class="line">  &#125; catch (accidentalStrictMode) &#123;</span><br><span class="line">    // This module should not be running in strict mode, so the above</span><br><span class="line">    // assignment should always work unless something is misconfigured. Just</span><br><span class="line">    // in case runtime.js accidentally runs in strict mode, we can escape</span><br><span class="line">    // strict mode using a global Function call. This could conceivably fail</span><br><span class="line">    // if a Content Security Policy forbids using Function, but in that case</span><br><span class="line">    // the proper solution is to fix the accidental strict mode problem. If</span><br><span class="line">    // you&#x27;ve misconfigured your bundler to force strict mode and applied a</span><br><span class="line">    // CSP to forbid Function, and you&#x27;re not willing to fix either of those</span><br><span class="line">    // problems, please detail your unique predicament in a GitHub issue.</span><br><span class="line">    Function(&quot;r&quot;, &quot;regeneratorRuntime = r&quot;)(runtime);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>修改好之后仍然报错</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Cannot read property &#x27;mark&#x27; of undefined</span><br><span class="line">TypeError: Cannot read property ‘mark’ of undefined</span><br></pre></td></tr></table></figure>

<p>微信小程序开发工具 开发项目配置中勾选  增强编译  即可。</p>
<h4 id="5-7-商品列表页面"><a href="#5-7-商品列表页面" class="headerlink" title="5.7 商品列表页面"></a>5.7 商品列表页面</h4><h6 id="5-7-1弹性布局-display-flex"><a href="#5-7-1弹性布局-display-flex" class="headerlink" title="5.7.1弹性布局 display:flex;"></a>5.7.1弹性布局 display:flex;</h6><table>
<thead>
<tr>
<th>容器属性</th>
<th>值</th>
</tr>
</thead>
<tbody><tr>
<td>flex-direction</td>
<td>row(默认值)：主轴为水平方向，起点在左端 ;row-reverse;column：主轴为垂直方向;column-reverse</td>
</tr>
<tr>
<td>flex-wrap</td>
<td>nowrap ：不换行；wrap：换行，第一行在上方；wrap-reverse：换行，第一行在下方</td>
</tr>
<tr>
<td>flex-flow</td>
<td>前两个属性缩写，默认值为row nowrap</td>
</tr>
<tr>
<td>justify-content</td>
<td>flex-start(默认值)：左对齐；fex-end：右对齐；center；space-between：两端对齐；space-around</td>
</tr>
<tr>
<td>align-items</td>
<td>flex-start；flex-end；center；baseline；stretch</td>
</tr>
<tr>
<td>align-content</td>
<td>flex-start；flex-end；center；space-between；space-around；stretch(默认值)</td>
</tr>
</tbody></table>
<h6 id="5-7-2商品描述超出两行就转换成省略号显示的样式设置"><a href="#5-7-2商品描述超出两行就转换成省略号显示的样式设置" class="headerlink" title="5.7.2商品描述超出两行就转换成省略号显示的样式设置"></a>5.7.2商品描述超出两行就转换成省略号显示的样式设置</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">view &#123;</span><br><span class="line"> display: -webkit-box;</span><br><span class="line"> overflow: hidden;</span><br><span class="line"> -webkit-box-orient: vertical;</span><br><span class="line"> -webkit-line-clamp: 2;//两行</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>补充：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">web中单行文本超出部分显示省略号</span><br><span class="line">div&#123;</span><br><span class="line">  overflow:hidden;</span><br><span class="line">  text-overflow: ellipsis;</span><br><span class="line">  white-space: nowrap;</span><br><span class="line">&#125;</span><br><span class="line">多行文本超出部分省略号</span><br><span class="line">div&#123;</span><br><span class="line">  white-space: normal;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">  text-overflow: ellipsis;</span><br><span class="line">  display: -webkit-box;</span><br><span class="line">  -webkit-box-orient: vertical;</span><br><span class="line">  -webkit-line-clamp: 2;</span><br><span class="line">  word-break: break-all;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>word-break值</p>
<table>
<thead>
<tr>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>normal</td>
<td>使用浏览器默认换行规则</td>
</tr>
<tr>
<td>break-all</td>
<td>允许在单词内换行</td>
</tr>
<tr>
<td>keep-all</td>
<td>只能在半角空格或连字符出换行</td>
</tr>
</tbody></table>
<h6 id="5-7-3页面触底刷新数据"><a href="#5-7-3页面触底刷新数据" class="headerlink" title="5.7.3页面触底刷新数据"></a>5.7.3页面触底刷新数据</h6><p>1、使用页面上拉触底事件的处理函数onReachBottom</p>
<p>2、判断页面数据是否有下一页，通过获取数据总页数和当前页码数来判断</p>
<p>3、页码数++，重新发送请求获取数据。</p>
<p>4、拿到请求回来的数据不是进行替换而是进行数据拼接</p>
<p>数据下拉刷新</p>
<p>1、触发下拉刷新需要在页面的JSON文件中开启一个配置项</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;enablePullDownRefresh&quot;:true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2、监听用户下拉刷新事件onPullDownRefresh()</p>
<h6 id="5-7-3-图片放大预览效果"><a href="#5-7-3-图片放大预览效果" class="headerlink" title="5.7.3 图片放大预览效果"></a>5.7.3 图片放大预览效果</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">给图片绑定点击事件，事件内使用</span><br><span class="line">wx.previewImage(&#123;</span><br><span class="line">  current: &#x27;&#x27;, // 当前显示图片的http链接</span><br><span class="line">  urls: [] // 需要预览的图片http链接列表</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="5-8-购物车页面"><a href="#5-8-购物车页面" class="headerlink" title="5.8 购物车页面"></a>5.8 购物车页面</h5><h6 id="5-8-1获取用户收获地址"><a href="#5-8-1获取用户收获地址" class="headerlink" title="5.8.1获取用户收获地址"></a>5.8.1获取用户收获地址</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">wx.chooseAddress(&#123;</span><br><span class="line">  success (res) &#123;</span><br><span class="line">    console.log(res.userName)</span><br><span class="line">    console.log(res.postalCode)</span><br><span class="line">    console.log(res.provinceName)</span><br><span class="line">    console.log(res.cityName)</span><br><span class="line">    console.log(res.countyName)</span><br><span class="line">    console.log(res.detailInfo)</span><br><span class="line">    console.log(res.nationalCode)</span><br><span class="line">    console.log(res.telNumber)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> wx.getSetting(&#123;</span><br><span class="line">        success: (result) =&gt; &#123;</span><br><span class="line">          const scopeAddress = result.authSetting[&quot;scope.address&quot;];</span><br><span class="line">          if(scopeAddress===true || scopeAddress===undefined)&#123;</span><br><span class="line">              wx.chooseAddress(&#123;</span><br><span class="line">                success: (res) =&gt; &#123;</span><br><span class="line">                  console.log(res)</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;);</span><br><span class="line">          &#125;else&#123;</span><br><span class="line">               wx.openSetting(&#123;</span><br><span class="line">                 success: (result2) =&gt; &#123;</span><br><span class="line">                   wx.chooseAddress(&#123;</span><br><span class="line">                     success: (result3) =&gt; &#123;</span><br><span class="line">                         console.log(result3);</span><br><span class="line">                     &#125;</span><br><span class="line">                   &#125;);</span><br><span class="line">                     </span><br><span class="line">                 &#125;,</span><br><span class="line">               &#125;);</span><br><span class="line">                 </span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br></pre></td></tr></table></figure>

<p>但是需要注意：</p>
<p>   需要先获取用户对小程序授权（wx.getSetting）获取用户地址信息状态 scope</p>
<p>  * 1.如果用户点击获取地址提示框确定 authSetting scope.address</p>
<p>​         scope值 true</p>
<p>  * 2. 用户点击取消 </p>
<p>​       scope值 false   诱导用户打开授权设置界面(wx.openSetting) 重新获取地址授权权限</p>
<p>  * 3.用户没有点击过获取地址的API</p>
<p>​       scope值 undefined</p>
<h6 id="5-8-2微信支付功能"><a href="#5-8-2微信支付功能" class="headerlink" title="5.8.2微信支付功能"></a>5.8.2微信支付功能</h6><p>需要企业账号</p>
<p>支付流程： 创建订单 —-》 准备预支付 —-》发起微信支付 —-》查询订单</p>
<p>c3高斯模糊</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">filter: blur(10rpx);</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="李泼泼"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">李泼泼</p>
  <div class="site-description" itemprop="description">向着目标奔跑！！！</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">10</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/ly721" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ly721" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:1037442605@qq.com" title="E-Mail → mailto:1037442605@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2019 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">李泼泼</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>


<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
  </script>
  
  <span class="site-uv">
   <i class="fa fa-user"></i> 本站访问数
   <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
   人
   </span>
   
   
   
   <span class="site-pv">
    <i class="fa fa-eye"></i> 本站总访问量
    <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    次
    </span>
    
   </div>


<span>
  <span class="post-meta-divider">|</span>
  本站已运行
  <span id="showDays"></span>
</span>
<script>
  var seconds = 1000;
  var minutes = seconds * 60;
  var hours = minutes * 60;
  var days = hours * 24;
  var years = days * 365;
  var birthDay = Date.UTC(2019,01,20,14,00,00); // 这里设置建站时间
  setInterval(function() {
    var today = new Date();
    var todayYear = today.getFullYear();
    var todayMonth = today.getMonth()+1;
    var todayDate = today.getDate();
    var todayHour = today.getHours();
    var todayMinute = today.getMinutes();
    var todaySecond = today.getSeconds();
    var now = Date.UTC(todayYear,todayMonth,todayDate,todayHour,todayMinute,todaySecond);
    var diff = now - birthDay;
    var diffYears = Math.floor(diff/years);
    var diffDays = Math.floor((diff/days)-diffYears*365);
    var diffHours = Math.floor((diff-(diffYears*365+diffDays)*days)/hours);
    var diffMinutes = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours)/minutes);
    var diffSeconds = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours-diffMinutes*minutes)/seconds);
      document.getElementById('showDays').innerHTML=""+diffYears+"年"+diffDays+"天"+diffHours+"小时"+diffMinutes+"分钟"+diffSeconds+"秒";
  }, 1000);
</script>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"right","width":175,"height":350},"mobile":{"show":true},"log":false});</script></body>
</html>
